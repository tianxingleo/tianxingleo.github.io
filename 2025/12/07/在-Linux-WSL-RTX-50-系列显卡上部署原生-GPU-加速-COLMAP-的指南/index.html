<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南 | Tianxingleo的Blog</title><meta name="keywords" content="3dgs,wsl,linux,colmap"><meta name="author" content="Tianxingleo"><meta name="copyright" content="Tianxingleo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南"><meta name="application-name" content="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南"><meta property="og:url" content="http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/index.html"><meta property="og:site_name" content="Tianxingleo的Blog"><meta property="og:description" content="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南 针对在 Linux（或 WSL2）环境下运行 COLMAP 时因缺乏 CUDA 支持而导致的计算效率低下问题，本技术文档旨在提供一套标准化的解决方案。当前，主流 Linux 发行版的官方软件仓库（"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/114477837_p0_master1200.jpg?_r_=9a34ca8b-1a68-966f-0549-2b097081723d"><meta property="article:author" content="Tianxingleo"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/114477837_p0_master1200.jpg?_r_=9a34ca8b-1a68-966f-0549-2b097081723d"><meta name="description" content="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南 针对在 Linux（或 WSL2）环境下运行 COLMAP 时因缺乏 CUDA 支持而导致的计算效率低下问题，本技术文档旨在提供一套标准化的解决方案。当前，主流 Linux 发行版的官方软件仓库（"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2abdc2befae45d70b9fd72c864f6fac0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-NVDE0BFR5M"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-NVDE0BFR5M');
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"S-IQC7J39MX5C7PRZM","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: {"appId":"66YB7CN8AP","apiKey":"61956196bfa43507ef197aade2f06e78","indexName":"my-hexo-blog","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Tianxingleo","link":"链接: ","source":"来源: Tianxingleo的Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Tianxingleo的Blog',
  title: '在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南',
  postAI: '',
  pageFillDescription: ' 在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南,  一、 核心问题剖析,  二、 环境初始化与净化 (Environment Preparation),  三、 部署 CUDA 工具包与兼容编译器 (CUDA Toolkit Installation),  四、 源码获取与构建配置 (Source Code Configuration),  五、 编译与系统级安装 (Compilation and Installation),  六、 验证与环境清理 (Verification and Cleanup),  七、 结论,  在 Linux (WSL) + RTX 50 系列显卡环境下 COLMAP GPU 加速模块的编译与调试实录,  一、 初始环境与问题背景,  二、 试错过程详解,  阶段一：依赖库的缺失与构建系统的初始化失败,  阶段二：Conda 环境对系统编译器的干扰,  阶段三：编译器版本过高导致的 CUDA 不兼容,  阶段四：架构代号 compute_120 的识别故障,  三、 最终编译与验证在系列显卡上部署原生加速的指南针对在或环境下运行时因缺乏支持而导致的计算效率低下问题本技术文档旨在提供一套标准化的解决方案当前主流发行版的官方软件仓库如所提供的预编译包通常不包含模块导致仅能调用资源严重制约了大规模三维重建的效率此外针对系列显卡架构因其采用了最新的算力标准传统的编译流程常因编译器版本滞后而遭遇兼容性阻碍本指南摒弃了繁冗的试错记录直接阐述针对系列显卡与环境构建原生加速版的最优实践路径一核心问题剖析官方预编译包的局限性鉴于发行版如系统库版本的复杂性官方仓库发布的通常默认移除了模块以确保证其通用兼容性环境的不确定性通过获取的版本常存在环境路径冲突且无法保证对硬件的有效调用架构的兼容性挑战系列显卡基于架构算力代号而现有的编译器及构建系统可能尚未完全适配该代号从而导致编译中断技术方案必须采用源码编译的方式构建并引入架构伪装策略强制指定兼容的算力架构以规避版本冲突二环境初始化与净化为确保编译环境的纯净性须优先清理潜在的冲突源特别是环境中的编译器干扰彻底退出环境重复执行直至不再显示环境标识更新系统软件包索引部署全套编译工具链及依赖库三部署工具包与兼容编译器鉴于系列显卡对版本的高要求以及编译工具链的滞后性需手动配置特定版本的编译器以确保兼容性部署工具包验证步骤执行确认输出包含版本信息部署编译器默认搭载的可能因版本过新而无法被当前的工具包支持故需回退至四源码获取与构建配置采用架构伪装策略强制编译器将识别为算力架构利用架构对架构的向下兼容性实现高效运行建立源码编译目录建议位于原生文件系统以优化性能克隆官方仓库切换至开发分支以获取最新的硬件支持初始化构建目录执行配置指令核心步骤强制指定算力架构为以兼容显式指定编译器规避版本冲突关键检查点务必查阅输出日志确认包含以下信息模块已定位加速功能已启用五编译与系统级安装确认配置无误后启动并行编译流程执行编译预计耗时分钟执行系统级安装六验证与环境清理功能验证在终端执行以下指令以核实的版本属性成功标识输出结果包含失败标识输出结果显示清除旧版本干扰若系统中曾通过安装过须将其移除以防止路径优先级冲突假设环境名为可选建立符号链接以确保环境调用新版二进制文件七结论针对系列显卡的硬件组合实现原生加速版的关键在于摒弃默认源安装规避不含支持的预编译包编译器降级引入以解决兼容性问题架构伪装通过参数强制指定架构解决的构建错误严格遵循上述流程即可构建出具备完整加速能力的实例从而显著提升三维重建任务的计算效率在系列显卡环境下加速模块的编译与调试实录本技术文档旨在详细记录在环境下针对搭载架构显卡的工作站手动编译并部署具备加速功能的过程中所遭遇的一系列技术障碍及其解决策略本文档侧重于问题复现与试错过程的深度剖析而非仅仅提供最终解决方案旨在为面临类似异构计算环境配置挑战的工程人员提供参考一初始环境与问题背景硬件环境软件环境支持初始状态未安装后通过安装默认核心问题在默认配置下通过或获取的二进制文件均不包含支持模块导致特征提取与匹配阶段仅能利用资源计算效率极低此外系列显卡采用了最新的架构现有的构建系统与编译器尚无法原生识别该架构代号导致源码编译阶段出现严重的兼容性阻断二试错过程详解阶段一依赖库的缺失与构建系统的初始化失败在尝试从源码构建时首先遭遇的是构建环境的不完整性操作尝试在环境下直接克隆仓库并执行配置错误现象立即报错指出系统中缺失库分析与修正的基础构建环境中不包含高动态范围图像处理所需的开发包通过查阅文档确定需补充安装然而仅安装开发包后再次报错提示缺失工具这表明的软件包策略将开发头文件与二进制工具进行了拆分必须额外安装以满足的查找逻辑此外后续又报出这揭示了一个隐蔽的依赖链问题系统源中的在编译时启用了支持因此在链接阶段它会尝试寻找的头文件路径若系统中未安装会导致路径解析失败阶段一结论必须一次性构建完整的依赖环境包括被隐式依赖的库阶段二环境对系统编译器的干扰在解决基础依赖后编译过程遭遇了更为隐蔽的环境变量污染问题操作在激活了环境的状态下执行配置错误现象输出显示它检测到的宿主编译器并非而是环境内部的编译器随后在尝试编译测试代码时报错无法找到且伴随有关于参数的重复定义警告分析环境为了保证包的独立性会修改等环境变量指向其内部封装的旧版编译器工具链这些编译器通常配置为仅搜索内部的路径从而忽略了系统级安装的开发头文件当系统级的通过安装被调用时它试图使用的作为宿主编译器导致了头文件路径的断裂与版本不匹配修正策略必须彻底退出环境执行直至提示符无环境前缀并清理缓存强制重新扫描系统路径以确保使用了和阶段三编译器版本过高导致的不兼容解决了环境干扰后终于开始工作但随即抛出了版本兼容性错误操作在纯净的系统环境下执行错误现象在进行编译器检查时失败输出如下错误信息分析默认搭载了然而当前系统源中提供的尚未适配的宿主编译器检查机制极其严格一旦检测到版本高于其支持的上限便会通过预处理指令强制中断编译尝试与修正试图通过传递给来绕过检查但这在复杂的构建系统中难以稳定传递且可能导致未定义的运行时行为最终确定的方案是降级编译器安装和并通过参数显式指定编译器路径阶段四架构代号的识别故障这是针对系列显卡特有的最为棘手的问题操作使用自动检测参数进行配置错误现象编译过程中抛出致命错误深度剖析的模式通过查询显卡驱动来确定当前的算力的驱动正确返回了其架构代号于是生成了编译选项传递给然而现有的编译器并不认识架构这是一个典型的软件版本滞后于硬件发布的问题编译器无法为它不认识的硬件架构生成机器码解决方案架构伪装利用架构的向后兼容性架构在指令集层面高度兼容上一代的架构因此必须放弃自动检测转而强制指定一个编译器已知且兼容的架构代号在本例中指定对应是最佳选择这迫使编译器生成针对的代码而的驱动程序能够在运行时将这些代码即时编译为适配的微码修正后的指令如下三最终编译与验证经过上述四个阶段的排查与参数修正构建系统终于生成了正确的构建文件操作执行进行并行编译随后执行将二进制文件部署至结果验证通过命令进行最终状态确认输出结果显示标志着加速模块已被正确编译并链接此过程揭示了在异构计算环境与前沿硬件系结合时自动化构建工具链的局限性强调了人工干预在版本匹配依赖管理及架构适配中的关键作用',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-12-07 00:50:02',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 8.1.1"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://avatars.githubusercontent.com/u/237200863?v=4"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tianxingleo.github.io" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/237200863?v=4" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/tianxingleo" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Tianxingleo的Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/3dgs/" style="font-size: 1.05rem;">3dgs<sup>7</sup></a><a href="/tags/5070/" style="font-size: 1.05rem;">5070<sup>1</sup></a><a href="/tags/Nerfstudio/" style="font-size: 1.05rem;">Nerfstudio<sup>1</sup></a><a href="/tags/SAM3D/" style="font-size: 1.05rem;">SAM3D<sup>1</sup></a><a href="/tags/blackwell/" style="font-size: 1.05rem;">blackwell<sup>2</sup></a><a href="/tags/c/" style="font-size: 1.05rem;">c<sup>4</sup></a><a href="/tags/cpc/" style="font-size: 1.05rem;">cpc<sup>4</sup></a><a href="/tags/cpp/" style="font-size: 1.05rem;">cpp<sup>14</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>1</sup></a><a href="/tags/cuda/" style="font-size: 1.05rem;">cuda<sup>1</sup></a><a href="/tags/dp/" style="font-size: 1.05rem;">dp<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>1</sup></a><a href="/tags/key%E7%A4%BE/" style="font-size: 1.05rem;">key社<sup>1</sup></a><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>5</sup></a><a href="/tags/mask/" style="font-size: 1.05rem;">mask<sup>1</sup></a><a href="/tags/nerfstudio/" style="font-size: 1.05rem;">nerfstudio<sup>1</sup></a><a href="/tags/pytorch/" style="font-size: 1.05rem;">pytorch<sup>3</sup></a><a href="/tags/sam/" style="font-size: 1.05rem;">sam<sup>1</sup></a><a href="/tags/sam3/" style="font-size: 1.05rem;">sam3<sup>1</sup></a><a href="/tags/tic/" style="font-size: 1.05rem;">tic<sup>1</sup></a><a href="/tags/wsl/" style="font-size: 1.05rem;">wsl<sup>5</sup></a><a href="/tags/yolo/" style="font-size: 1.05rem;">yolo<sup>1</sup></a><a href="/tags/%E4%B8%8D%E5%AE%9A%E7%A7%AF%E5%88%86/" style="font-size: 1.05rem;">不定积分<sup>1</sup></a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 1.05rem;">函数<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>1</sup></a><a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size: 1.05rem;">动漫<sup>1</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 1.05rem;">大学<sup>7</sup></a><a href="/tags/%E5%A4%A9%E4%BD%BF%E7%9A%84%E5%BF%83%E8%B7%B3/" style="font-size: 1.05rem;">天使的心跳<sup>1</sup></a><a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 1.05rem;">字符串<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">学习<sup>6</sup></a><a href="/tags/%E6%8C%87%E9%92%88/" style="font-size: 1.05rem;">指针<sup>2</sup></a><a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size: 1.05rem;">搜索<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>2</sup></a><a href="/tags/%E7%A7%AF%E5%88%86/" style="font-size: 1.05rem;">积分<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>6</sup></a><a href="/tags/%E7%BB%93%E6%9E%84%E4%BD%93/" style="font-size: 1.05rem;">结构体<sup>1</sup></a><a href="/tags/%E8%B4%A8%E6%95%B0%E7%AD%9B/" style="font-size: 1.05rem;">质数筛<sup>2</sup></a><a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 1.05rem;">链表<sup>1</sup></a><a href="/tags/%E9%AB%98%E6%95%B0/" style="font-size: 1.05rem;">高数<sup>5</sup></a><a href="/tags/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">高等数学<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">9</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/3dgs/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>3dgs</span></a><a class="article-meta__tags" href="/tags/wsl/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>wsl</span></a><a class="article-meta__tags" href="/tags/linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>linux</span></a><a class="article-meta__tags" href="/tags/colmap/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>colmap</span></a></span></div></div><h1 class="post-title" itemprop="name headline">在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-12-06T16:48:20.000Z" title="发表于 2025-12-07 00:48:20">2025-12-07</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-12-06T16:50:02.912Z" title="更新于 2025-12-07 00:50:02">2025-12-07</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为广州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>广州</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/114477837_p0_master1200.jpg?_r_=9a34ca8b-1a68-966f-0549-2b097081723d"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/"><header><a href="/tags/3dgs/" tabindex="-1" itemprop="url">3dgs</a><a href="/tags/wsl/" tabindex="-1" itemprop="url">wsl</a><a href="/tags/linux/" tabindex="-1" itemprop="url">linux</a><a href="/tags/colmap/" tabindex="-1" itemprop="url">colmap</a><h1 id="CrawlerTitle" itemprop="name headline">在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Tianxingleo</span><time itemprop="dateCreated datePublished" datetime="2025-12-06T16:48:20.000Z" title="发表于 2025-12-07 00:48:20">2025-12-07</time><time itemprop="dateCreated datePublished" datetime="2025-12-06T16:50:02.912Z" title="更新于 2025-12-07 00:50:02">2025-12-07</time></header><h1 id="在-linux-wsl-rtx-50-系列显卡上部署原生-gpu-加速-colmap-的指南"><a class="markdownIt-Anchor" href="#在-linux-wsl-rtx-50-系列显卡上部署原生-gpu-加速-colmap-的指南"></a> 在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南</h1>
<p>针对在 Linux（或 WSL2）环境下运行 COLMAP 时因缺乏 CUDA 支持而导致的计算效率低下问题，本技术文档旨在提供一套标准化的解决方案。当前，主流 Linux 发行版的官方软件仓库（如 <code>apt</code>）所提供的 COLMAP 预编译包通常不包含 CUDA 模块，导致仅能调用 CPU 资源，严重制约了大规模三维重建的效率。此外，针对 NVIDIA RTX 50 系列显卡（Blackwell 架构），因其采用了最新的 <code>compute_120</code> 算力标准，传统的编译流程常因编译器版本滞后而遭遇兼容性阻碍。</p>
<p>本指南摒弃了繁冗的试错记录，直接阐述针对 RTX 50 系列显卡与 Linux 环境构建原生 GPU 加速版 COLMAP 的最优实践路径。</p>
<h2 id="一-核心问题剖析"><a class="markdownIt-Anchor" href="#一-核心问题剖析"></a> 一、 核心问题剖析</h2>
<ol>
<li><strong>官方预编译包的局限性：</strong> 鉴于 Linux 发行版（如 Ubuntu、Debian）系统库版本的复杂性，官方仓库发布的 COLMAP 通常默认移除了 CUDA 模块以确保证其通用兼容性。</li>
<li><strong>Conda 环境的不确定性：</strong> 通过 <code>conda install colmap</code> 获取的版本常存在环境路径冲突，且无法保证对 GPU 硬件的有效调用。</li>
<li><strong>Blackwell 架构的兼容性挑战：</strong> RTX 50 系列显卡基于 Blackwell 架构（算力代号 <code>compute_120</code>），而现有的 CUDA 编译器（nvcc）及 CMake 构建系统可能尚未完全适配该代号，从而导致编译中断。</li>
</ol>
<p><strong>技术方案：</strong> 必须采用源码编译的方式构建 COLMAP，并引入“架构伪装”（Compatibility Mode）策略，强制指定兼容的算力架构以规避版本冲突。</p>
<h2 id="二-环境初始化与净化-environment-preparation"><a class="markdownIt-Anchor" href="#二-环境初始化与净化-environment-preparation"></a> 二、 环境初始化与净化 (Environment Preparation)</h2>
<p>为确保编译环境的纯净性，须优先清理潜在的冲突源，特别是 Conda 环境中的编译器干扰。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 1. 彻底退出 Conda 环境 (重复执行直至不再显示环境标识)</span><br><span class="line">conda deactivate</span><br><span class="line">conda deactivate</span><br><span class="line"></span><br><span class="line"># 2. 更新系统软件包索引</span><br><span class="line">sudo apt-get update</span><br><span class="line"></span><br><span class="line"># 3. 部署全套编译工具链及依赖库</span><br><span class="line">sudo apt-get install -y \</span><br><span class="line">    git cmake ninja-build build-essential \</span><br><span class="line">    libboost-program-options-dev libboost-filesystem-dev \</span><br><span class="line">    libboost-graph-dev libboost-system-dev libboost-test-dev \</span><br><span class="line">    libeigen3-dev libfreeimage-dev libmetis-dev \</span><br><span class="line">    libgoogle-glog-dev libgoogle-gflags-dev \</span><br><span class="line">    libsqlite3-dev libglew-dev \</span><br><span class="line">    qtbase5-dev libqt5opengl5-dev libcgal-dev libceres-dev \</span><br><span class="line">    libopenimageio-dev openimageio-tools libopencv-dev</span><br></pre></td></tr></table></figure>
<h2 id="三-部署-cuda-工具包与兼容编译器-cuda-toolkit-installation"><a class="markdownIt-Anchor" href="#三-部署-cuda-工具包与兼容编译器-cuda-toolkit-installation"></a> 三、 部署 CUDA 工具包与兼容编译器 (CUDA Toolkit Installation)</h2>
<p>鉴于 RTX 50 系列显卡对 CUDA 版本的高要求，以及编译工具链的滞后性，需手动配置特定版本的编译器以确保兼容性。</p>
<ol>
<li>
<p><strong>部署 NVIDIA CUDA 工具包：</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y nvidia-cuda-toolkit</span><br></pre></td></tr></table></figure>
<p><em>验证步骤：</em> 执行 <code>nvcc --version</code>，确认输出包含版本信息。</p>
</li>
<li>
<p><strong>部署 GCC-12 编译器：</strong> Ubuntu 24.04 默认搭载的 GCC-13 可能因版本过新而无法被当前的 CUDA 工具包支持，故需回退至 GCC-12。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install -y gcc-12 g++-12</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="四-源码获取与构建配置-source-code-configuration"><a class="markdownIt-Anchor" href="#四-源码获取与构建配置-source-code-configuration"></a> 四、 源码获取与构建配置 (Source Code Configuration)</h2>
<p>采用“架构伪装”策略：强制编译器将 RTX 5070 识别为 RTX 4090（算力架构 <code>89</code>），利用 Blackwell 架构对 Ada Lovelace 架构的向下兼容性实现高效运行。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 1. 建立源码编译目录 (建议位于 Linux 原生文件系统以优化 I/O 性能)</span><br><span class="line">cd ~</span><br><span class="line">mkdir -p source_code &amp;&amp; cd source_code</span><br><span class="line"></span><br><span class="line"># 2. 克隆 COLMAP 官方仓库</span><br><span class="line">git clone [https://github.com/colmap/colmap.git](https://github.com/colmap/colmap.git)</span><br><span class="line">cd colmap</span><br><span class="line">git checkout dev  # 切换至开发分支以获取最新的硬件支持</span><br><span class="line"></span><br><span class="line"># 3. 初始化构建目录</span><br><span class="line">mkdir build &amp;&amp; cd build</span><br><span class="line"></span><br><span class="line"># 4. 执行 CMake 配置指令 (核心步骤)</span><br><span class="line"># -DCMAKE_CUDA_ARCHITECTURES=89 : 强制指定算力架构为 8.9 (Ada)，以兼容 Blackwell。</span><br><span class="line"># -DCMAKE_..._COMPILER : 显式指定 GCC-12 编译器，规避版本冲突。</span><br><span class="line">cmake .. -GNinja \</span><br><span class="line">    -DCMAKE_CUDA_ARCHITECTURES=89 \</span><br><span class="line">    -DCMAKE_C_COMPILER=/usr/bin/gcc-12 \</span><br><span class="line">    -DCMAKE_CXX_COMPILER=/usr/bin/g++-12 \</span><br><span class="line">    -DCMAKE_CUDA_HOST_COMPILER=/usr/bin/g++-12</span><br></pre></td></tr></table></figure>
<p><strong>关键检查点：</strong> 务必查阅 CMake 输出日志，确认包含以下信息：</p>
<ul>
<li><code>-- Found CUDA: ...</code> (CUDA 模块已定位)</li>
<li><code>-- Enabling CUDA support</code> (GPU 加速功能已启用)</li>
</ul>
<h2 id="五-编译与系统级安装-compilation-and-installation"><a class="markdownIt-Anchor" href="#五-编译与系统级安装-compilation-and-installation"></a> 五、 编译与系统级安装 (Compilation and Installation)</h2>
<p>确认配置无误后，启动并行编译流程。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 1. 执行编译 (预计耗时 5-10 分钟)</span><br><span class="line">ninja</span><br><span class="line"></span><br><span class="line"># 2. 执行系统级安装</span><br><span class="line">sudo ninja install</span><br></pre></td></tr></table></figure>
<h2 id="六-验证与环境清理-verification-and-cleanup"><a class="markdownIt-Anchor" href="#六-验证与环境清理-verification-and-cleanup"></a> 六、 验证与环境清理 (Verification and Cleanup)</h2>
<ol>
<li>
<p><strong>功能验证：</strong> 在终端执行以下指令以核实 COLMAP 的版本属性：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/colmap -h | grep CUDA</span><br></pre></td></tr></table></figure>
<p>✅ <strong>成功标识：</strong> 输出结果包含 <code>(Commit ... with CUDA)</code>。 ❌ <strong>失败标识：</strong> 输出结果显示 <code>without CUDA</code>。</p>
</li>
<li>
<p><strong>清除旧版本干扰：</strong> 若系统中曾通过 Conda 安装过 COLMAP，须将其移除以防止路径优先级冲突。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 假设 Conda 环境名为 gs_linux</span><br><span class="line">rm -f ~/miniconda3/envs/gs_linux/bin/colmap</span><br><span class="line"></span><br><span class="line"># (可选) 建立符号链接以确保 Conda 环境调用新版二进制文件</span><br><span class="line">ln -s /usr/local/bin/colmap ~/miniconda3/envs/gs_linux/bin/colmap</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="七-结论"><a class="markdownIt-Anchor" href="#七-结论"></a> 七、 结论</h2>
<p>针对 <strong>Linux + RTX 50 系列显卡</strong> 的硬件组合，实现原生 GPU 加速版 COLMAP 的关键在于：</p>
<ol>
<li><strong>摒弃默认源安装：</strong> 规避不含 CUDA 支持的 apt/conda 预编译包。</li>
<li><strong>编译器降级：</strong> 引入 GCC-12 以解决 <code>unsupported GNU version</code> 兼容性问题。</li>
<li><strong>架构伪装：</strong> 通过 CMake 参数强制指定 <code>89</code> 架构，解决 <code>Unsupported gpu architecture 'compute_120'</code> 的构建错误。</li>
</ol>
<p>严格遵循上述流程，即可构建出具备完整 GPU 加速能力的 COLMAP 实例，从而显著提升三维重建任务的计算效率。</p>
<h1 id="在-linux-wsl-rtx-50-系列显卡环境下-colmap-gpu-加速模块的编译与调试实录"><a class="markdownIt-Anchor" href="#在-linux-wsl-rtx-50-系列显卡环境下-colmap-gpu-加速模块的编译与调试实录"></a> 在 Linux (WSL) + RTX 50 系列显卡环境下 COLMAP GPU 加速模块的编译与调试实录</h1>
<p>本技术文档旨在详细记录在 Windows Subsystem for Linux (WSL) 环境下，针对搭载 NVIDIA RTX 5070（Blackwell 架构）显卡的工作站，手动编译并部署具备 CUDA 加速功能的 COLMAP 过程中所遭遇的一系列技术障碍及其解决策略。本文档侧重于问题复现与试错过程的深度剖析，而非仅仅提供最终解决方案，旨在为面临类似异构计算环境配置挑战的工程人员提供参考。</p>
<h2 id="一-初始环境与问题背景"><a class="markdownIt-Anchor" href="#一-初始环境与问题背景"></a> 一、 初始环境与问题背景</h2>
<p><strong>硬件环境：</strong></p>
<ul>
<li><strong>GPU:</strong> NVIDIA GeForce RTX 5070 (Architecture: Blackwell, Compute Capability: 12.0)</li>
<li><strong>CPU:</strong> Intel Core i9-13900K</li>
<li><strong>OS:</strong> Windows 11 Pro 23H2 (Host), Ubuntu 24.04 LTS (Guest/WSL2)</li>
</ul>
<p><strong>软件环境：</strong></p>
<ul>
<li><strong>WSL2:</strong> Kernel version 5.15.153.1-microsoft-standard-WSL2</li>
<li><strong>CUDA Driver (Windows Host):</strong> 550.x (支持 CUDA 12.x)</li>
<li><strong>CUDA Toolkit (Linux Guest):</strong> 初始状态未安装，后通过 apt 安装 <code>nvidia-cuda-toolkit</code> (version 12.0.140)</li>
<li><strong>Compiler:</strong> GCC 13.2.0 (Ubuntu 24.04 默认)</li>
</ul>
<p><strong>核心问题：</strong> 在默认配置下，通过 <code>apt install colmap</code> 或 <code>conda install colmap</code> 获取的二进制文件均不包含 CUDA 支持模块。导致特征提取（Feature Extraction）与匹配（Matching）阶段仅能利用 CPU 资源，计算效率极低。此外，RTX 50 系列显卡采用了最新的 Blackwell 架构（Compute Capability 12.0），现有的构建系统（CMake 3.28）与编译器（NVCC 12.0）尚无法原生识别该架构代号，导致源码编译阶段出现严重的兼容性阻断。</p>
<h2 id="二-试错过程详解"><a class="markdownIt-Anchor" href="#二-试错过程详解"></a> 二、 试错过程详解</h2>
<h3 id="阶段一依赖库的缺失与构建系统的初始化失败"><a class="markdownIt-Anchor" href="#阶段一依赖库的缺失与构建系统的初始化失败"></a> 阶段一：依赖库的缺失与构建系统的初始化失败</h3>
<p>在尝试从源码构建 COLMAP 时，首先遭遇的是构建环境的不完整性。</p>
<p><strong>操作：</strong> 尝试在 WSL 环境下直接克隆 COLMAP 仓库并执行 CMake 配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone [https://github.com/colmap/colmap.git](https://github.com/colmap/colmap.git)</span><br><span class="line">cd colmap &amp;&amp; mkdir build &amp;&amp; cd build</span><br><span class="line">cmake .. -GNinja</span><br></pre></td></tr></table></figure>
<p><strong>错误现象：</strong> CMake 立即报错，指出系统中缺失 <code>OpenImageIO</code> 库。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMake Error at cmake/FindDependencies.cmake:30 (find_package):</span><br><span class="line">  By not providing &quot;FindOpenImageIO.cmake&quot; in CMAKE_MODULE_PATH...</span><br><span class="line">  Could not find a package configuration file provided by &quot;OpenImageIO&quot;...</span><br></pre></td></tr></table></figure>
<p><strong>分析与修正：</strong> Ubuntu 24.04 的基础构建环境中不包含高动态范围图像处理所需的 <code>OpenImageIO</code> 开发包。通过查阅文档，确定需补充安装 <code>libopenimageio-dev</code>。</p>
<p>然而，仅安装开发包后，CMake 再次报错，提示缺失 <code>iconvert</code> 工具：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">The imported target &quot;OpenImageIO::iconvert&quot; references the file &quot;/usr/bin/iconvert&quot; but this file does not exist.</span><br></pre></td></tr></table></figure>
<p>这表明 Ubuntu 的软件包策略将开发头文件与二进制工具进行了拆分。必须额外安装 <code>openimageio-tools</code> 以满足 CMake 的查找逻辑。</p>
<p>此外，CMake 后续又报出 <code>Imported target &quot;OpenImageIO::OpenImageIO&quot; includes non-existent path &quot;/usr/include/opencv4&quot;</code>。这揭示了一个隐蔽的依赖链问题：系统源中的 <code>OpenImageIO</code> 在编译时启用了 OpenCV 支持，因此在链接阶段它会尝试寻找 OpenCV 的头文件路径。若系统中未安装 <code>libopencv-dev</code>，会导致路径解析失败。</p>
<p><strong>阶段一结论：</strong> 必须一次性构建完整的依赖环境，包括被隐式依赖的库。</p>
<h3 id="阶段二conda-环境对系统编译器的干扰"><a class="markdownIt-Anchor" href="#阶段二conda-环境对系统编译器的干扰"></a> 阶段二：Conda 环境对系统编译器的干扰</h3>
<p>在解决基础依赖后，编译过程遭遇了更为隐蔽的环境变量污染问题。</p>
<p><strong>操作：</strong> 在激活了 Conda 环境 (<code>gs_linux</code>) 的状态下执行 CMake 配置。</p>
<p><strong>错误现象：</strong> CMake 输出显示，它检测到的宿主编译器并非 <code>/usr/bin/cc</code>，而是 Conda 环境内部的编译器：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-- Check for working C compiler: /home/ltx/miniconda3/envs/gs_linux/bin/x86_64-conda-linux-gnu-cc</span><br></pre></td></tr></table></figure>
<p>随后，在尝试编译 CUDA 测试代码时，NVCC 报错无法找到 <code>cuda_runtime.h</code>，且伴随有关于 <code>-ccbin</code> 参数的重复定义警告。</p>
<p><strong>分析：</strong> Conda 环境为了保证包的独立性，会修改 <code>PATH</code>, <code>CC</code>, <code>CXX</code> 等环境变量，指向其内部封装的旧版编译器工具链。这些编译器通常配置为仅搜索 Conda 内部的 include 路径，从而忽略了系统级（<code>/usr/include</code>）安装的 CUDA 开发头文件。</p>
<p>当系统级的 NVCC（通过 apt 安装）被调用时，它试图使用 Conda 的 GCC 作为宿主编译器（Host Compiler），导致了头文件路径的断裂与版本不匹配。</p>
<p><strong>修正策略：</strong> 必须彻底退出 Conda 环境（执行 <code>conda deactivate</code> 直至 shell提示符无环境前缀），并清理 CMake 缓存（<code>rm -rf *</code>），强制 CMake 重新扫描系统路径，以确保使用了 <code>/usr/bin/gcc</code> 和 <code>/usr/bin/g++</code>。</p>
<h3 id="阶段三编译器版本过高导致的-cuda-不兼容"><a class="markdownIt-Anchor" href="#阶段三编译器版本过高导致的-cuda-不兼容"></a> 阶段三：编译器版本过高导致的 CUDA 不兼容</h3>
<p>解决了环境干扰后，NVCC 终于开始工作，但随即抛出了版本兼容性错误。</p>
<p><strong>操作：</strong> 在纯净的系统环境下执行 <code>cmake .. -GNinja</code>。</p>
<p><strong>错误现象：</strong> NVCC 在进行编译器检查时失败，输出如下错误信息：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/include/crt/host_config.h:132:2: error: #error -- unsupported GNU version! gcc versions later than 12 are not supported!</span><br></pre></td></tr></table></figure>
<p><strong>分析：</strong> Ubuntu 24.04 默认搭载了 GCC 13。然而，当前系统源中提供的 CUDA Toolkit (12.0) 尚未适配 GCC 13。CUDA 的宿主编译器检查机制（Host Compiler Check）极其严格，一旦检测到 GCC 版本高于其支持的上限，便会通过预处理指令强制中断编译。</p>
<p><strong>尝试与修正：</strong> 试图通过传递 <code>-allow-unsupported-compiler</code> 给 NVCC 来绕过检查，但这在复杂的 CMake 构建系统中难以稳定传递，且可能导致未定义的运行时行为。</p>
<p>最终确定的方案是降级编译器：安装 <code>gcc-12</code> 和 <code>g++-12</code>，并通过 CMake 参数显式指定编译器路径：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-DCMAKE_C_COMPILER=/usr/bin/gcc-12</span><br><span class="line">-DCMAKE_CXX_COMPILER=/usr/bin/g++-12</span><br><span class="line">-DCMAKE_CUDA_HOST_COMPILER=/usr/bin/g++-12</span><br></pre></td></tr></table></figure>
<h3 id="阶段四架构代号-compute_120-的识别故障"><a class="markdownIt-Anchor" href="#阶段四架构代号-compute_120-的识别故障"></a> 阶段四：架构代号 “compute_120” 的识别故障</h3>
<p>这是针对 RTX 50 系列显卡特有的、最为棘手的问题。</p>
<p><strong>操作：</strong> 使用自动检测参数 <code>-DCMAKE_CUDA_ARCHITECTURES=native</code> 进行配置。</p>
<p><strong>错误现象：</strong> 编译过程中，NVCC 抛出致命错误：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvcc fatal : Unsupported gpu architecture &#x27;compute_120&#x27;</span><br></pre></td></tr></table></figure>
<p><strong>深度剖析：</strong> CMake 的 <code>native</code> 模式通过查询显卡驱动来确定当前 GPU 的算力（Compute Capability）。RTX 5070 的驱动正确返回了其架构代号 <code>12.0</code>。于是，CMake 生成了编译选项 <code>-arch=sm_120</code> 传递给 NVCC。</p>
<p>然而，现有的 NVCC 12.0 编译器并不认识 <code>sm_120</code>（Blackwell 架构）。这是一个典型的“软件版本滞后于硬件发布”的问题。编译器无法为它不认识的硬件架构生成机器码。</p>
<p><strong>解决方案（架构伪装）：</strong> 利用 NVIDIA GPU 架构的向后兼容性（Binary Compatibility）。Blackwell 架构在指令集层面高度兼容上一代的 Ada Lovelace 架构（Compute Capability 8.9）。</p>
<p>因此，必须放弃 <code>native</code> 自动检测，转而强制指定一个编译器已知且兼容的架构代号。在本例中，指定 <code>89</code>（对应 RTX 4090）是最佳选择。这迫使编译器生成针对 sm_89 的 PTX 代码，而 RTX 5070 的驱动程序能够在运行时将这些 PTX 代码即时编译（JIT）为适配 sm_120 的微码。</p>
<p>修正后的 CMake 指令如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cmake .. -GNinja \</span><br><span class="line">    -DCMAKE_CUDA_ARCHITECTURES=89 \</span><br><span class="line">    -DCMAKE_C_COMPILER=/usr/bin/gcc-12 \</span><br><span class="line">    -DCMAKE_CXX_COMPILER=/usr/bin/g++-12 \</span><br><span class="line">    -DCMAKE_CUDA_HOST_COMPILER=/usr/bin/g++-12</span><br></pre></td></tr></table></figure>
<h2 id="三-最终编译与验证"><a class="markdownIt-Anchor" href="#三-最终编译与验证"></a> 三、 最终编译与验证</h2>
<p>经过上述四个阶段的排查与参数修正，构建系统终于生成了正确的 Ninja 构建文件。</p>
<p><strong>操作：</strong> 执行 <code>ninja</code> 进行并行编译，随后执行 <code>sudo ninja install</code> 将二进制文件部署至 <code>/usr/local/bin</code>。</p>
<p><strong>结果验证：</strong> 通过命令 <code>/usr/local/bin/colmap -h | grep CUDA</code> 进行最终状态确认。 输出结果显示：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(Commit 8e014c5b on 2025-12-04 with CUDA)</span><br></pre></td></tr></table></figure>
<p>标志着 GPU 加速模块已被正确编译并链接。</p>
<p>此过程揭示了在异构计算环境（WSL）与前沿硬件（RTX 50系）结合时，自动化构建工具链的局限性，强调了人工干预在版本匹配、依赖管理及架构适配中的关键作用。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/tianxingleo.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/tianxingleo.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Tianxingleo</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/')">在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南&amp;url=http://tianxingleo.top/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/&amp;pic=https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/114477837_p0_master1200.jpg?_r_=9a34ca8b-1a68-966f-0549-2b097081723d" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://tianxingleo.top" target="_blank">Tianxingleo的Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/3dgs/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>3dgs<span class="tagsPageCount">7</span></a><a class="post-meta__box__tags" href="/tags/wsl/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>wsl<span class="tagsPageCount">5</span></a><a class="post-meta__box__tags" href="/tags/linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>linux<span class="tagsPageCount">5</span></a><a class="post-meta__box__tags" href="/tags/colmap/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>colmap<span class="tagsPageCount">4</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=8305bb36-2ec9-b0be-8c9c-fb786cd902f3" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/12/05/%E3%80%90%E9%A6%96%E5%8F%91%E3%80%91%E9%92%88%E5%AF%B9-Windows-%E7%8E%AF%E5%A2%83%E4%B8%8B-NVIDIA-RTX-50-%E7%B3%BB%E5%88%97%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86%E5%8D%95%E5%85%83%E7%9A%84-Nerfstudio-3DGS-%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=5d6578d9-bde9-2636-a935-b72ba0ae3af9" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">【首发】针对 Windows 环境下 NVIDIA RTX 50 系列图形处理单元的 Nerfstudio (3DGS) 部署流程</div></div></a></div><div class="next-post pull-right"><a href="/2025/12/08/%E3%80%90%E9%A6%96%E5%8F%91%E3%80%91%E5%9C%A8-RTX-5070-Blackwell-WSL2-%E4%B8%8A%E8%B7%91%E9%80%9A%E6%9C%80%E6%96%B0%E6%A8%A1%E5%9E%8B-Meta-SAM-3D-%E7%9A%84%E7%BB%88%E6%9E%81%E6%96%B9%E6%A1%88/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/94219701_p0.webp?_r_=64d3c102-8efa-3d97-9812-a0fb4098783a" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">【首发】在 RTX 5070 (Blackwell) + WSL2 上跑通最新模型 Meta SAM 3D 的终极方案</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/12/10/%E5%9C%A8%E6%9C%80%E6%96%B0Blackwell%E6%9E%B6%E6%9E%84%E4%BD%8E%E6%98%BE%E5%AD%98%E6%B6%88%E8%B4%B9%E7%BA%A7%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%80%9A%E8%BF%87%E5%A4%8D%E7%8E%B0%E6%9C%80%E6%96%B0%E8%AE%BA%E6%96%87%E4%BD%BF%E7%94%A8VGGT%E6%9B%BF%E4%BB%A3COLMAP%E5%8A%A0%E9%80%9F3DGS%E8%AE%AD%E7%BB%83/" title="在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/9c7026124dcb360f454545904aac9838cb95adb8.webp?_r_=fa557c88-5c33-80fe-df53-5c001ec995fd" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-10</div><div class="title">在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练</div></div></a></div><div><a href="/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/" title="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/114477837_p0_master1200.jpg?_r_=97b38891-b794-93a2-62ea-832939a2fe6c" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-10</div><div class="title">用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</div></div></a></div><div><a href="/2025/12/08/%E3%80%90%E9%A6%96%E5%8F%91%E3%80%91%E5%9C%A8-RTX-5070-Blackwell-WSL2-%E4%B8%8A%E8%B7%91%E9%80%9A%E6%9C%80%E6%96%B0%E6%A8%A1%E5%9E%8B-Meta-SAM-3D-%E7%9A%84%E7%BB%88%E6%9E%81%E6%96%B9%E6%A1%88/" title="【首发】在 RTX 5070 (Blackwell) + WSL2 上跑通最新模型 Meta SAM 3D 的终极方案"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/94219701_p0.webp?_r_=64d3c102-8efa-3d97-9812-a0fb4098783a" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-08</div><div class="title">【首发】在 RTX 5070 (Blackwell) + WSL2 上跑通最新模型 Meta SAM 3D 的终极方案</div></div></a></div><div><a href="/2025/12/05/%E3%80%90%E9%A6%96%E5%8F%91%E3%80%91%E9%92%88%E5%AF%B9-Windows-%E7%8E%AF%E5%A2%83%E4%B8%8B-NVIDIA-RTX-50-%E7%B3%BB%E5%88%97%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86%E5%8D%95%E5%85%83%E7%9A%84-Nerfstudio-3DGS-%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/" title="【首发】针对 Windows 环境下 NVIDIA RTX 50 系列图形处理单元的 Nerfstudio (3DGS) 部署流程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=5d6578d9-bde9-2636-a935-b72ba0ae3af9" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-05</div><div class="title">【首发】针对 Windows 环境下 NVIDIA RTX 50 系列图形处理单元的 Nerfstudio (3DGS) 部署流程</div></div></a></div><div><a href="/2025/12/05/%E5%85%B3%E4%BA%8E%E5%9C%A8-Google-Colab-%E5%B9%B3%E5%8F%B0%E5%9F%BA%E4%BA%8E-Tesla-T4-%E5%8A%A0%E9%80%9F%E5%99%A8%E5%85%A8%E6%B5%81%E7%A8%8B%E9%83%A8%E7%BD%B2%E4%B8%89%E7%BB%B4%E9%AB%98%E6%96%AF%E6%B3%BC%E6%BA%85%EF%BC%883DGS%EF%BC%89%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AE%9E%E6%96%BD%E5%8D%8F%E8%AE%AE%EF%BC%882025-12%EF%BC%89/" title="关于在 Google Colab 平台基于 Tesla T4 加速器全流程部署三维高斯泼溅（3DGS）技术的实施协议（2025.12）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/9c7026124dcb360f454545904aac9838cb95adb8.webp?_r_=83b381ee-0274-4b52-bbca-b5990375dd4d" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-05</div><div class="title">关于在 Google Colab 平台基于 Tesla T4 加速器全流程部署三维高斯泼溅（3DGS）技术的实施协议（2025.12）</div></div></a></div><div><a href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/%E3%80%90Pixiv%E7%94%BB%E5%B8%88%E7%B2%BE%E9%80%89%EF%BC%88132%EF%BC%89%E3%80%91%E5%85%AB%E4%B8%89_988777.webp?_r_=05d4583a-bbfa-6a98-0d80-eef6ae3e31f5" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-10</div><div class="title">3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/tianxingleo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);"><b style="color:#fff">这是天马行空（tianxingleo）</b>的blog，用于<b style="color:#fff">记录、分享、学习、交流</b></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8-linux-wsl-rtx-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-gpu-%E5%8A%A0%E9%80%9F-colmap-%E7%9A%84%E6%8C%87%E5%8D%97"><span class="toc-number">1.</span> <span class="toc-text"> 在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98%E5%89%96%E6%9E%90"><span class="toc-number">1.1.</span> <span class="toc-text"> 一、 核心问题剖析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E5%87%80%E5%8C%96-environment-preparation"><span class="toc-number">1.2.</span> <span class="toc-text"> 二、 环境初始化与净化 (Environment Preparation)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E9%83%A8%E7%BD%B2-cuda-%E5%B7%A5%E5%85%B7%E5%8C%85%E4%B8%8E%E5%85%BC%E5%AE%B9%E7%BC%96%E8%AF%91%E5%99%A8-cuda-toolkit-installation"><span class="toc-number">1.3.</span> <span class="toc-text"> 三、 部署 CUDA 工具包与兼容编译器 (CUDA Toolkit Installation)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E6%BA%90%E7%A0%81%E8%8E%B7%E5%8F%96%E4%B8%8E%E6%9E%84%E5%BB%BA%E9%85%8D%E7%BD%AE-source-code-configuration"><span class="toc-number">1.4.</span> <span class="toc-text"> 四、 源码获取与构建配置 (Source Code Configuration)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-%E7%BC%96%E8%AF%91%E4%B8%8E%E7%B3%BB%E7%BB%9F%E7%BA%A7%E5%AE%89%E8%A3%85-compilation-and-installation"><span class="toc-number">1.5.</span> <span class="toc-text"> 五、 编译与系统级安装 (Compilation and Installation)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E9%AA%8C%E8%AF%81%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%B8%85%E7%90%86-verification-and-cleanup"><span class="toc-number">1.6.</span> <span class="toc-text"> 六、 验证与环境清理 (Verification and Cleanup)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-%E7%BB%93%E8%AE%BA"><span class="toc-number">1.7.</span> <span class="toc-text"> 七、 结论</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%9C%A8-linux-wsl-rtx-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E7%8E%AF%E5%A2%83%E4%B8%8B-colmap-gpu-%E5%8A%A0%E9%80%9F%E6%A8%A1%E5%9D%97%E7%9A%84%E7%BC%96%E8%AF%91%E4%B8%8E%E8%B0%83%E8%AF%95%E5%AE%9E%E5%BD%95"><span class="toc-number">2.</span> <span class="toc-text"> 在 Linux (WSL) + RTX 50 系列显卡环境下 COLMAP GPU 加速模块的编译与调试实录</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%88%9D%E5%A7%8B%E7%8E%AF%E5%A2%83%E4%B8%8E%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF"><span class="toc-number">2.1.</span> <span class="toc-text"> 一、 初始环境与问题背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E8%AF%95%E9%94%99%E8%BF%87%E7%A8%8B%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.2.</span> <span class="toc-text"> 二、 试错过程详解</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%80%E4%BE%9D%E8%B5%96%E5%BA%93%E7%9A%84%E7%BC%BA%E5%A4%B1%E4%B8%8E%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E5%88%9D%E5%A7%8B%E5%8C%96%E5%A4%B1%E8%B4%A5"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 阶段一：依赖库的缺失与构建系统的初始化失败</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%BA%8Cconda-%E7%8E%AF%E5%A2%83%E5%AF%B9%E7%B3%BB%E7%BB%9F%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%B9%B2%E6%89%B0"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 阶段二：Conda 环境对系统编译器的干扰</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E4%B8%89%E7%BC%96%E8%AF%91%E5%99%A8%E7%89%88%E6%9C%AC%E8%BF%87%E9%AB%98%E5%AF%BC%E8%87%B4%E7%9A%84-cuda-%E4%B8%8D%E5%85%BC%E5%AE%B9"><span class="toc-number">2.2.3.</span> <span class="toc-text"> 阶段三：编译器版本过高导致的 CUDA 不兼容</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%B6%E6%AE%B5%E5%9B%9B%E6%9E%B6%E6%9E%84%E4%BB%A3%E5%8F%B7-compute_120-%E7%9A%84%E8%AF%86%E5%88%AB%E6%95%85%E9%9A%9C"><span class="toc-number">2.2.4.</span> <span class="toc-text"> 阶段四：架构代号 “compute_120” 的识别故障</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E6%9C%80%E7%BB%88%E7%BC%96%E8%AF%91%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-number">2.3.</span> <span class="toc-text"> 三、 最终编译与验证</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/15/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/" title="微分方程笔记整理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=8305bb36-2ec9-b0be-8c9c-fb786cd902f3" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微分方程笔记整理"/></a><div class="content"><a class="title" href="/2025/12/15/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/" title="微分方程笔记整理">微分方程笔记整理</a><time datetime="2025-12-15T11:44:08.000Z" title="发表于 2025-12-15 19:44:08">2025-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/14/%E7%BA%BF%E4%BB%A3%E4%B8%8E%E5%87%A0%E4%BD%955-6-7-%E7%AB%A0%E7%AC%94%E8%AE%B0/" title="线代与几何5 6 7 章笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/7ae2047cde0451cf21fa7a8842565b58f0e9d1e1.webp?_r_=6be34e6a-496f-b2ff-e0ff-a5a279b8f051" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="线代与几何5 6 7 章笔记"/></a><div class="content"><a class="title" href="/2025/12/14/%E7%BA%BF%E4%BB%A3%E4%B8%8E%E5%87%A0%E4%BD%955-6-7-%E7%AB%A0%E7%AC%94%E8%AE%B0/" title="线代与几何5 6 7 章笔记">线代与几何5 6 7 章笔记</a><time datetime="2025-12-14T11:31:54.000Z" title="发表于 2025-12-14 19:31:54">2025-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/%E3%80%90Pixiv%E7%94%BB%E5%B8%88%E7%B2%BE%E9%80%89%EF%BC%88132%EF%BC%89%E3%80%91%E5%85%AB%E4%B8%89_988777.webp?_r_=05d4583a-bbfa-6a98-0d80-eef6ae3e31f5" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践"/></a><div class="content"><a class="title" href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践">3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践</a><time datetime="2025-12-10T15:04:59.000Z" title="发表于 2025-12-10 23:04:59">2025-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/" title="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/114477837_p0_master1200.jpg?_r_=97b38891-b794-93a2-62ea-832939a2fe6c" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"/></a><div class="content"><a class="title" href="/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/" title="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线">用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</a><time datetime="2025-12-10T15:02:02.000Z" title="发表于 2025-12-10 23:02:02">2025-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/10/%E5%9C%A8%E6%9C%80%E6%96%B0Blackwell%E6%9E%B6%E6%9E%84%E4%BD%8E%E6%98%BE%E5%AD%98%E6%B6%88%E8%B4%B9%E7%BA%A7%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%80%9A%E8%BF%87%E5%A4%8D%E7%8E%B0%E6%9C%80%E6%96%B0%E8%AE%BA%E6%96%87%E4%BD%BF%E7%94%A8VGGT%E6%9B%BF%E4%BB%A3COLMAP%E5%8A%A0%E9%80%9F3DGS%E8%AE%AD%E7%BB%83/" title="在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/9c7026124dcb360f454545904aac9838cb95adb8.webp?_r_=fa557c88-5c33-80fe-df53-5c001ec995fd" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练"/></a><div class="content"><a class="title" href="/2025/12/10/%E5%9C%A8%E6%9C%80%E6%96%B0Blackwell%E6%9E%B6%E6%9E%84%E4%BD%8E%E6%98%BE%E5%AD%98%E6%B6%88%E8%B4%B9%E7%BA%A7%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%80%9A%E8%BF%87%E5%A4%8D%E7%8E%B0%E6%9C%80%E6%96%B0%E8%AE%BA%E6%96%87%E4%BD%BF%E7%94%A8VGGT%E6%9B%BF%E4%BB%A3COLMAP%E5%8A%A0%E9%80%9F3DGS%E8%AE%AD%E7%BB%83/" title="在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练">在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练</a><time datetime="2025-12-10T13:53:53.000Z" title="发表于 2025-12-10 21:53:53">2025-12-10</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="Tianxingleo" target="_blank">Tianxingleo</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">38</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">53</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tianxingleo.github.io" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/237200863?v=4" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/tianxingleo" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/3dgs/" style="font-size: 0.88rem;">3dgs<sup>7</sup></a><a href="/tags/5070/" style="font-size: 0.88rem;">5070<sup>1</sup></a><a href="/tags/Nerfstudio/" style="font-size: 0.88rem;">Nerfstudio<sup>1</sup></a><a href="/tags/SAM3D/" style="font-size: 0.88rem;">SAM3D<sup>1</sup></a><a href="/tags/blackwell/" style="font-size: 0.88rem;">blackwell<sup>2</sup></a><a href="/tags/c/" style="font-size: 0.88rem;">c<sup>4</sup></a><a href="/tags/cpc/" style="font-size: 0.88rem;">cpc<sup>4</sup></a><a href="/tags/cpp/" style="font-size: 0.88rem;">cpp<sup>14</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>1</sup></a><a href="/tags/cuda/" style="font-size: 0.88rem;">cuda<sup>1</sup></a><a href="/tags/dp/" style="font-size: 0.88rem;">dp<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>1</sup></a><a href="/tags/key%E7%A4%BE/" style="font-size: 0.88rem;">key社<sup>1</sup></a><a href="/tags/linux/" style="font-size: 0.88rem;">linux<sup>5</sup></a><a href="/tags/mask/" style="font-size: 0.88rem;">mask<sup>1</sup></a><a href="/tags/nerfstudio/" style="font-size: 0.88rem;">nerfstudio<sup>1</sup></a><a href="/tags/pytorch/" style="font-size: 0.88rem;">pytorch<sup>3</sup></a><a href="/tags/sam/" style="font-size: 0.88rem;">sam<sup>1</sup></a><a href="/tags/sam3/" style="font-size: 0.88rem;">sam3<sup>1</sup></a><a href="/tags/tic/" style="font-size: 0.88rem;">tic<sup>1</sup></a><a href="/tags/wsl/" style="font-size: 0.88rem;">wsl<sup>5</sup></a><a href="/tags/yolo/" style="font-size: 0.88rem;">yolo<sup>1</sup></a><a href="/tags/%E4%B8%8D%E5%AE%9A%E7%A7%AF%E5%88%86/" style="font-size: 0.88rem;">不定积分<sup>1</sup></a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 0.88rem;">函数<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>1</sup></a><a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size: 0.88rem;">动漫<sup>1</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 0.88rem;">大学<sup>7</sup></a><a href="/tags/%E5%A4%A9%E4%BD%BF%E7%9A%84%E5%BF%83%E8%B7%B3/" style="font-size: 0.88rem;">天使的心跳<sup>1</sup></a><a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 0.88rem;">字符串<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">学习<sup>6</sup></a><a href="/tags/%E6%8C%87%E9%92%88/" style="font-size: 0.88rem;">指针<sup>2</sup></a><a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size: 0.88rem;">搜索<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>2</sup></a><a href="/tags/%E7%A7%AF%E5%88%86/" style="font-size: 0.88rem;">积分<sup>1</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>6</sup></a><a href="/tags/%E7%BB%93%E6%9E%84%E4%BD%93/" style="font-size: 0.88rem;">结构体<sup>1</sup></a><a href="/tags/%E8%B4%A8%E6%95%B0%E7%AD%9B/" style="font-size: 0.88rem;">质数筛<sup>2</sup></a><a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 0.88rem;">链表<sup>1</sup></a><a href="/tags/%E9%AB%98%E6%95%B0/" style="font-size: 0.88rem;">高数<sup>5</sup></a><a href="/tags/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">高等数学<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("14/10/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Tianxingleo 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: '',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-NVDE0BFR5M', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>