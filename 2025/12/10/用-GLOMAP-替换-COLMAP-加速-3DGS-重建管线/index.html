<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线 | Tianxingleo的Blog</title><meta name="keywords" content="3dgs,wsl,linux,colmap,glomap"><meta name="author" content="Tianxingleo"><meta name="copyright" content="Tianxingleo"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><meta name="application-name" content="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><meta property="og:url" content="http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/index.html"><meta property="og:site_name" content="Tianxingleo的Blog"><meta property="og:description" content="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线 在 3D Gaussian Splatting (3DGS) 的数据预处理阶段，稀疏重建（Sparse Reconstruction）往往是耗时瓶颈。传统的 COLMAP 采用增量式（Incremental）重建策略，虽然精度高但随着"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=24836490-acf9-b03d-252d-8563dfdaf8f0"><meta property="article:author" content="Tianxingleo"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=24836490-acf9-b03d-252d-8563dfdaf8f0"><meta name="description" content="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线 在 3D Gaussian Splatting (3DGS) 的数据预处理阶段，稀疏重建（Sparse Reconstruction）往往是耗时瓶颈。传统的 COLMAP 采用增量式（Incremental）重建策略，虽然精度高但随着"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/"><link rel="preconnect" href="//cdn.cbd.int"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?2abdc2befae45d70b9fd72c864f6fac0";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-NVDE0BFR5M"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-NVDE0BFR5M');
</script><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"tianli","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"S-IQC7J39MX5C7PRZM","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: {"appId":"66YB7CN8AP","apiKey":"61956196bfa43507ef197aade2f06e78","indexName":"my-hexo-blog","hits":{"per_page":6},"languages":{"input_placeholder":"输入关键词后按下回车查找","hits_empty":"找不到您查询的内容：${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: Tianxingleo","link":"链接: ","source":"来源: Tianxingleo的Blog","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'Tianxingleo的Blog',
  title: '用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线',
  postAI: '',
  pageFillDescription: ' 用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线,  1. 核心思路,  2. 环境依赖与编译 (The Golden Configuration),  2.1 安装系统级依赖,  2.2 编译 GLOMAP,  3. Python 管线集成,  3.1 运行时环境注入 (解决 DLL Hell),  3.2 替换 Mapper 调用逻辑,  4. 总结,  踩坑实录：在 GCC 14 与 Conda 混合环境中编译 GLOMAP 的至暗时刻,  🛑 第一关：构建系统的版本代沟,  1.1 CMake 版本的背刺,  🛑 第二关：依赖库的隐身与冲突 (OpenGL amp CGAL),  2.1 Conda 编译器的傲慢 (OpenGL 缺失),  2.2 CGAL 的死循环,  🛑 第三关：编译器的超前 (GCC 14 vs Boost),  🛑 第四关：链接器的精神分裂 (ABI Conflict),  🛑 第五关：运行时的DLL Hell (SQLite amp Python),  5.1 SQLite 版本冲突,  5.2 Python 库的自相残杀,  🏁 总结用替换加速重建管线在的数据预处理阶段稀疏重建往往是耗时瓶颈传统的采用增量式重建策略虽然精度高但随着图片数量增加速度呈指数级下降作为一种全新的全局式系统能够在保持重建质量的同时将重建速度提升个数量级且对弱纹理和难样本具有更强的鲁棒性本文将介绍如何在现代开发环境中以最简洁的方式编译并将其无缝集成到自动化管线中核心思路的设计理念是兼容的数据格式因此我们不需要替换整个管线只需替换后端的核心重建模块前端保持不变继续使用进行特征提取和匹配后端替换将替换为输入输出直接读取的并输出标准的稀疏模型格式环境依赖与编译在混合了环境新版和系统环境旧版的复杂场景下编译极易遇到冲突或依赖地狱经过验证系统级依赖环境的混合编译策略是最稳健的方案安装系统级依赖不要试图在内部解决图形学依赖直接使用安装核心库确保和兼容性安装和的系统开发库编译在环境激活的状态下使用以下配置这个配置强制链接系统的和库同时兼容的新特性避免了和头文件冲突核心配置命令编译并安装注安装完成后验证是否能正常输出管线集成在自动化脚本如中我们需要做两件事注入运行时环境变量以解决库冲突并修改调用逻辑运行时环境注入解决和可能依赖不同版本的或为了防止运行时崩溃如必须强制优先加载环境的动态库在脚本的入口处添加获取环境路径核心修正将路径置顶解决版本冲突核心修正解决在扩展编译时的冲突替换调用逻辑找到原本调用的代码段将其替换为注意路径差异需要指定到而只需指定到它会自动创建子目录前置步骤特征提取和匹配保持使用自动查找系统中的执行命令务必传入修改后的总结通过上述改造我们实现了一个高性能的预处理管线编译层面通过混合链接策略解决了和环境下的兼容性问题运行层面通过注入解决了等底层库的版本冲突逻辑层面利用的全局优化算法替代了传统的增量式重建这种方案不仅大幅缩短了大规模场景的重建时间还显著提升了自动化流程的稳定性踩坑实录在与混合环境中编译的至暗时刻背景目标是将传统的增量式重建替换为全局重建以加速管线环境自带极新第一关构建系统的版本代沟版本的背刺起初为了追求最新特性我运行了安装了预览版报错现象深度分析在编译时会自动下载源码作为依赖的脚本还在使用旧版的模块查找库然而版本激进地移除了这些废弃模块导致向后兼容性断裂修正降级回稳健的版本系列第二关依赖库的隐身与冲突编译器的傲慢缺失虽然系统通过安装了但依然报错深度分析环境内的默认搜索路径被隔离在环境内它看不见宿主机下的系统库错误尝试试图添加后果确实找到了但它同时也顺着找到了系统自带的旧版导致与内的新版冲突报错修正精准投喂不开放整个而是显式指定库文件路径的死循环强依赖尝试在内安装却因版本和依赖锁死导致于是转而使用系统级报错现象编译时报错深度分析虽然在配置阶段找到了库层面但自带的编译器层面为了防止环境污染屏蔽了标准头文件路径修正软链接大法欺骗编译器将系统头文件映射到环境中第三关编译器的超前这是最隐蔽的一个坑报错现象深度分析原生支持并定义了位浮点数的特化不知道已经干了这事于是它自己又定义了一遍结果也就是所谓的违规编译直接炸裂错误尝试使用编译参数无效因为某些头文件的内部包含逻辑可能绕过了这个宏检查修正源码编写脚本直接修改环境里的头文件坑中坑最初的脚本使用简单的字符串匹配插入和结果因为未能正确处理嵌套的大括号或前缀导致插入位置错误截断了类定义引发语法错误最终解利用文件末尾的锚点倒序定位精准包裹冲突代码块冲突的类定义第四关链接器的精神分裂这是编译通过后在阶段的大报错现象深度分析你的代码使用编译默认开启新版字符串内存布局符号中带有标签里的库为了兼容性里的很多时候还在使用旧版结果链接器拿着新版钥匙去开旧版锁找不到对应的符号错误尝试强制使用旧版后果的报错解决了但和也在里却报出了几百个原来环境是分裂的是旧而是新这被称为修正心脏移植既然的是旧不可用我们决定弃用的强行链接系统的系统库通常是新与兼容安装系统偷梁换柱将的头文件目录重命名隐藏建立软链接指向强制指定这样编译时用的是系统的新链接时也用的系统的完美解决了冲突第五关运行时的编译终于成功了但运行时直接崩溃版本冲突报错现象深度分析来源由生成如果是调用系统旧版生成的可能版本较老读取链接了的新版库关键点由于我们在编译时为了解决问题在中引入了导致运行时优先加载了系统的旧版而不是的新版新代码旧库崩溃修正在脚本中注入环境变量强制将的目录优先级提至最高库的自相残杀报错现象深度分析在即时编译算子时触发了对的劫持检查环境中的版本过高导致断言失败循环引用依赖的库与库版本不匹配导致模块导入死循环修正注入环境变量升级库总结要让在一个由于使用了而变得复杂的现代环境中跑起来我们实际上完成了一次外科手术级别的环境改造源码修改头文件以适配文件系统通过软链接让编译器看到系统图形库依赖树混合使用系统级和级以对齐运行时劫持解决动态库加载顺序',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-12-17 23:13:39',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css" integrity="sha512-fHwaWebuwA7NSF5Qg/af4UeDx9XqUpYpOGgubo3yWu+b2IQR4UeQwbb42Ti7gVAjNtVoI/I9TEoYeu9omwcC6g==" crossorigin="anonymous" referrerpolicy="no-referrer" /><!-- hexo injector head_end end --><meta name="generator" content="Hexo 8.1.1"><link rel="alternate" href="/atom.xml" title="Tianxingleo的Blog" type="application/atom+xml">
</head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://avatars.githubusercontent.com/u/237200863?v=4"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tianxingleo.github.io" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/237200863?v=4" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/tianxingleo" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">Tianxingleo的Blog</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" href="javascript:void(0);" title="搜索🔍" accesskey="s"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span> 搜索</span></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/3dgs/" style="font-size: 1.05rem;">3dgs<sup>7</sup></a><a href="/tags/5070/" style="font-size: 1.05rem;">5070<sup>1</sup></a><a href="/tags/Nerfstudio/" style="font-size: 1.05rem;">Nerfstudio<sup>1</sup></a><a href="/tags/SAM3D/" style="font-size: 1.05rem;">SAM3D<sup>1</sup></a><a href="/tags/blackwell/" style="font-size: 1.05rem;">blackwell<sup>2</sup></a><a href="/tags/c/" style="font-size: 1.05rem;">c<sup>4</sup></a><a href="/tags/colmap/" style="font-size: 1.05rem;">colmap<sup>4</sup></a><a href="/tags/cpc/" style="font-size: 1.05rem;">cpc<sup>4</sup></a><a href="/tags/cpp/" style="font-size: 1.05rem;">cpp<sup>14</sup></a><a href="/tags/css/" style="font-size: 1.05rem;">css<sup>1</sup></a><a href="/tags/cuda/" style="font-size: 1.05rem;">cuda<sup>1</sup></a><a href="/tags/dp/" style="font-size: 1.05rem;">dp<sup>1</sup></a><a href="/tags/google-colab/" style="font-size: 1.05rem;">google colab<sup>1</sup></a><a href="/tags/html/" style="font-size: 1.05rem;">html<sup>1</sup></a><a href="/tags/key%E7%A4%BE/" style="font-size: 1.05rem;">key社<sup>1</sup></a><a href="/tags/linux/" style="font-size: 1.05rem;">linux<sup>5</sup></a><a href="/tags/mask/" style="font-size: 1.05rem;">mask<sup>1</sup></a><a href="/tags/nerfstudio/" style="font-size: 1.05rem;">nerfstudio<sup>1</sup></a><a href="/tags/pytorch/" style="font-size: 1.05rem;">pytorch<sup>3</sup></a><a href="/tags/sam/" style="font-size: 1.05rem;">sam<sup>1</sup></a><a href="/tags/sam3/" style="font-size: 1.05rem;">sam3<sup>1</sup></a><a href="/tags/tic/" style="font-size: 1.05rem;">tic<sup>1</sup></a><a href="/tags/wsl/" style="font-size: 1.05rem;">wsl<sup>5</sup></a><a href="/tags/yolo/" style="font-size: 1.05rem;">yolo<sup>1</sup></a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 1.05rem;">函数<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">前端<sup>1</sup></a><a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size: 1.05rem;">动漫<sup>1</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 1.05rem;">大学<sup>7</sup></a><a href="/tags/%E5%A4%A9%E4%BD%BF%E7%9A%84%E5%BF%83%E8%B7%B3/" style="font-size: 1.05rem;">天使的心跳<sup>1</sup></a><a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 1.05rem;">字符串<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 1.05rem;">学习<sup>6</sup></a><a href="/tags/%E6%8C%87%E9%92%88/" style="font-size: 1.05rem;">指针<sup>2</sup></a><a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size: 1.05rem;">搜索<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">数学<sup>2</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>6</sup></a><a href="/tags/%E7%BB%93%E6%9E%84%E4%BD%93/" style="font-size: 1.05rem;">结构体<sup>1</sup></a><a href="/tags/%E8%B4%A8%E6%95%B0%E7%AD%9B/" style="font-size: 1.05rem;">质数筛<sup>2</sup></a><a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 1.05rem;">链表<sup>1</sup></a><a href="/tags/%E9%AB%98%E6%95%B0/" style="font-size: 1.05rem;">高数<sup>6</sup></a><a href="/tags/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/" style="font-size: 1.05rem;">高等数学<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/12/"><span class="card-archive-list-date">十二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">10</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/11/"><span class="card-archive-list-date">十一月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">18</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/10/"><span class="card-archive-list-date">十月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">11</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/3dgs/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>3dgs</span></a><a class="article-meta__tags" href="/tags/wsl/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>wsl</span></a><a class="article-meta__tags" href="/tags/linux/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>linux</span></a><a class="article-meta__tags" href="/tags/colmap/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>colmap</span></a><a class="article-meta__tags" href="/tags/glomap/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>glomap</span></a></span></div></div><h1 class="post-title" itemprop="name headline">用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-12-10T15:02:02.000Z" title="发表于 2025-12-10 23:02:02">2025-12-10</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-12-17T15:13:39.000Z" title="更新于 2025-12-17 23:13:39">2025-12-17</time></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-pv-cv" id="" data-flag-title="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><i class="anzhiyufont anzhiyu-icon-fw-eye post-meta-icon"></i><span class="post-meta-label" title="阅读量">阅读量:</span><span id="busuanzi_value_page_pv"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></span><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为广州"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>广州</span><span class="post-meta-separator"></span><span class="post-meta-commentcount"><i class="anzhiyufont anzhiyu-icon-comments post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/#post-comment" tabindex="-1"><span id="twikoo-count"><i class="anzhiyufont anzhiyu-icon-spinner anzhiyu-spin"></i></span></a></span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=24836490-acf9-b03d-252d-8563dfdaf8f0"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/"><header><a href="/tags/3dgs/" tabindex="-1" itemprop="url">3dgs</a><a href="/tags/wsl/" tabindex="-1" itemprop="url">wsl</a><a href="/tags/linux/" tabindex="-1" itemprop="url">linux</a><a href="/tags/colmap/" tabindex="-1" itemprop="url">colmap</a><a href="/tags/glomap/" tabindex="-1" itemprop="url">glomap</a><h1 id="CrawlerTitle" itemprop="name headline">用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">Tianxingleo</span><time itemprop="dateCreated datePublished" datetime="2025-12-10T15:02:02.000Z" title="发表于 2025-12-10 23:02:02">2025-12-10</time><time itemprop="dateCreated datePublished" datetime="2025-12-17T15:13:39.000Z" title="更新于 2025-12-17 23:13:39">2025-12-17</time></header><h1 id="用-glomap-替换-colmap-加速-3dgs-重建管线"><a class="markdownIt-Anchor" href="#用-glomap-替换-colmap-加速-3dgs-重建管线"></a> 用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</h1>
<p>在 3D Gaussian Splatting (3DGS) 的数据预处理阶段，稀疏重建（Sparse Reconstruction）往往是耗时瓶颈。传统的 <strong>COLMAP</strong> 采用增量式（Incremental）重建策略，虽然精度高但随着图片数量增加速度呈指数级下降。</p>
<p><strong>GLOMAP</strong> 作为一种全新的全局式（Global）SfM 系统，能够在保持重建质量的同时，将重建速度提升 1-2 个数量级，且对弱纹理和难样本具有更强的鲁棒性。本文将介绍如何在现代 Linux 开发环境中，以最简洁的方式编译 GLOMAP 并将其无缝集成到 Python 自动化管线中。</p>
<h2 id="1-核心思路"><a class="markdownIt-Anchor" href="#1-核心思路"></a> 1. 核心思路</h2>
<p>GLOMAP 的设计理念是兼容 COLMAP 的数据格式。因此，我们不需要替换整个管线，只需替换后端的核心重建模块：</p>
<ol>
<li><strong>前端（保持不变）</strong>：继续使用 COLMAP 进行特征提取（Feature Extractor）和匹配（Matcher）。</li>
<li><strong>后端（替换）</strong>：将 <code>colmap mapper</code> 替换为 <code>glomap mapper</code>。</li>
<li><strong>输入/输出</strong>：GLOMAP 直接读取 COLMAP 的 <code>database.db</code>，并输出标准的 COLMAP 稀疏模型格式（<code>.bin</code>）。</li>
</ol>
<h2 id="2-环境依赖与编译-the-golden-configuration"><a class="markdownIt-Anchor" href="#2-环境依赖与编译-the-golden-configuration"></a> 2. 环境依赖与编译 (The “Golden” Configuration)</h2>
<p>在混合了 Conda 环境（新版 ABI）和系统环境（旧版 ABI/GCC 14）的复杂场景下，编译 GLOMAP 极易遇到 ABI 冲突或依赖地狱。</p>
<p>经过验证，<strong>“系统级依赖 + Conda 环境”</strong> 的混合编译策略是最稳健的方案。</p>
<h3 id="21-安装系统级依赖"><a class="markdownIt-Anchor" href="#21-安装系统级依赖"></a> 2.1 安装系统级依赖</h3>
<p>不要试图在 Conda 内部解决图形学依赖，直接使用 <code>apt</code> 安装核心库，确保 OpenGL 和 ABI 兼容性：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="comment"># 安装 OpenGL, CGAL 和 Boost 的系统开发库</span></span><br><span class="line"><span class="built_in">sudo</span> apt-get install libgl1-mesa-dev libglu1-mesa-dev libcgal-dev libboost-all-dev</span><br></pre></td></tr></table></figure>
<h3 id="22-编译-glomap"><a class="markdownIt-Anchor" href="#22-编译-glomap"></a> 2.2 编译 GLOMAP</h3>
<p>在 Conda 环境激活的状态下，使用以下 CMake 配置。这个配置强制 GLOMAP 链接系统的 Boost 和 OpenGL 库，同时兼容 GCC 14 的新特性，避免了 <code>undefined reference</code> 和头文件冲突。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/colmap/glomap.git</span><br><span class="line"><span class="built_in">cd</span> glomap</span><br><span class="line"><span class="built_in">mkdir</span> build &amp;&amp; <span class="built_in">cd</span> build</span><br><span class="line"></span><br><span class="line"><span class="comment"># 核心配置命令</span></span><br><span class="line">cmake .. -GNinja -DCMAKE_BUILD_TYPE=Release \</span><br><span class="line">    -DOPENGL_gl_LIBRARY=/usr/lib/x86_64-linux-gnu/libGL.so \</span><br><span class="line">    -DOPENGL_glu_LIBRARY=/usr/lib/x86_64-linux-gnu/libGLU.so \</span><br><span class="line">    -DCGAL_DIR=/usr/lib/x86_64-linux-gnu/cmake/CGAL \</span><br><span class="line">    -DCMAKE_CXX_FLAGS=<span class="string">&quot;-DBOOST_MATH_DISABLE_FLOAT128&quot;</span> \</span><br><span class="line">    -DBOOST_ROOT=/usr \</span><br><span class="line">    -DBoost_LIBRARY_DIR=/usr/lib/x86_64-linux-gnu \</span><br><span class="line">    -DBoost_NO_SYSTEM_PATHS=OFF</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编译并安装</span></span><br><span class="line">ninja</span><br><span class="line"><span class="built_in">sudo</span> ninja install</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>注</strong>：安装完成后，验证 <code>glomap --help</code> 是否能正常输出。</li>
</ul>
<h2 id="3-python-管线集成"><a class="markdownIt-Anchor" href="#3-python-管线集成"></a> 3. Python 管线集成</h2>
<p>在自动化脚本（如 <code>run_glomap.py</code>）中，我们需要做两件事：注入运行时环境变量以解决库冲突，并修改调用逻辑。</p>
<h3 id="31-运行时环境注入-解决-dll-hell"><a class="markdownIt-Anchor" href="#31-运行时环境注入-解决-dll-hell"></a> 3.1 运行时环境注入 (解决 DLL Hell)</h3>
<p>GLOMAP 和 COLMAP 可能依赖不同版本的 <code>libsqlite3</code> 或 <code>libstdc++</code>。为了防止运行时崩溃（如 <code>SQL logic error</code>），必须强制优先加载 Conda 环境的动态库。</p>
<p>在 Python 脚本的入口处添加：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取 Conda 环境路径</span></span><br><span class="line">conda_prefix = os.environ.get(<span class="string">&quot;CONDA_PREFIX&quot;</span>)</span><br><span class="line">env = os.environ.copy()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> conda_prefix:</span><br><span class="line">    conda_lib = os.path.join(conda_prefix, <span class="string">&quot;lib&quot;</span>)</span><br><span class="line">    current_ld = env.get(<span class="string">&quot;LD_LIBRARY_PATH&quot;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">    <span class="comment"># 🔥 核心修正：将 Conda lib 路径置顶，解决 SQLite 版本冲突</span></span><br><span class="line">    env[<span class="string">&quot;LD_LIBRARY_PATH&quot;</span>] = <span class="string">f&quot;<span class="subst">&#123;conda_lib&#125;</span>:<span class="subst">&#123;current_ld&#125;</span>&quot;</span></span><br><span class="line">    </span><br><span class="line"><span class="comment"># 🔥 核心修正：解决 Setuptools/Distutils 在 PyTorch 扩展编译时的冲突</span></span><br><span class="line">env[<span class="string">&quot;SETUPTOOLS_USE_DISTUTILS&quot;</span>] = <span class="string">&quot;stdlib&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="32-替换-mapper-调用逻辑"><a class="markdownIt-Anchor" href="#32-替换-mapper-调用逻辑"></a> 3.2 替换 Mapper 调用逻辑</h3>
<p>找到原本调用 <code>colmap mapper</code> 的代码段，将其替换为 <code>glomap mapper</code>。</p>
<p><strong>注意路径差异</strong>：COLMAP 需要指定到 <code>sparse/0</code>，而 GLOMAP 只需指定到 <code>sparse</code>（它会自动创建 <code>0</code> 子目录）。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> shutil</span><br><span class="line"><span class="keyword">import</span> subprocess</span><br><span class="line"></span><br><span class="line"><span class="comment"># ... 前置步骤：特征提取和匹配 (保持使用 colmap) ...</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># === Step 3: Global SfM via GLOMAP ===</span></span><br><span class="line">glomap_output_dir = colmap_output_dir / <span class="string">&quot;sparse&quot;</span></span><br><span class="line">glomap_output_dir.mkdir(parents=<span class="literal">True</span>, exist_ok=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 自动查找系统中的 glomap</span></span><br><span class="line">system_glomap_exe = shutil.which(<span class="string">&quot;glomap&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> <span class="keyword">not</span> system_glomap_exe:</span><br><span class="line">    system_glomap_exe = <span class="string">&quot;/usr/local/bin/glomap&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;🚀 [SfM Backend] Switching to GLOMAP: <span class="subst">&#123;system_glomap_exe&#125;</span>&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行命令</span></span><br><span class="line">subprocess.run([</span><br><span class="line">    system_glomap_exe, <span class="string">&quot;mapper&quot;</span>,</span><br><span class="line">    <span class="string">&quot;--database_path&quot;</span>, <span class="built_in">str</span>(database_path),</span><br><span class="line">    <span class="string">&quot;--image_path&quot;</span>, <span class="built_in">str</span>(extracted_images_dir),</span><br><span class="line">    <span class="string">&quot;--output_path&quot;</span>, <span class="built_in">str</span>(glomap_output_dir)</span><br><span class="line">], check=<span class="literal">True</span>, env=env) <span class="comment"># 务必传入修改后的 env</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;✅ Global reconstruction finished.&quot;</span>)</span><br></pre></td></tr></table></figure>
<h2 id="4-总结"><a class="markdownIt-Anchor" href="#4-总结"></a> 4. 总结</h2>
<p>通过上述改造，我们实现了一个高性能的 3DGS 预处理管线：</p>
<ol>
<li><strong>编译层面</strong>：通过混合链接策略（System Boost + Conda Dependencies），解决了 GCC 14 和 CUDA 环境下的 ABI 兼容性问题。</li>
<li><strong>运行层面</strong>：通过 <code>LD_LIBRARY_PATH</code> 注入，解决了 SQLite 等底层库的版本冲突。</li>
<li><strong>逻辑层面</strong>：利用 GLOMAP 的全局优化算法替代了传统的增量式重建。</li>
</ol>
<p>这种方案不仅大幅缩短了大规模场景的重建时间，还显著提升了自动化流程的稳定性。</p>
<h1 id="踩坑实录在-gcc-14-与-conda-混合环境中编译-glomap-的至暗时刻"><a class="markdownIt-Anchor" href="#踩坑实录在-gcc-14-与-conda-混合环境中编译-glomap-的至暗时刻"></a> 踩坑实录：在 GCC 14 与 Conda 混合环境中编译 GLOMAP 的至暗时刻</h1>
<blockquote>
<p><strong>背景</strong>： 目标是将传统的 COLMAP 增量式重建替换为 GLOMAP 全局重建以加速 3DGS 管线。 <strong>环境</strong>：</p>
<ul>
<li>OS: Ubuntu 24.04 (WSL2)</li>
<li>Compiler: GCC 14.3.0 (Conda 自带，极新)</li>
<li>CUDA: 12.8</li>
<li>Base Environment: Conda (<code>vggt</code>)</li>
</ul>
</blockquote>
<hr />
<h2 id="第一关构建系统的版本代沟"><a class="markdownIt-Anchor" href="#第一关构建系统的版本代沟"></a> 🛑 第一关：构建系统的版本代沟</h2>
<h3 id="11-cmake-版本的背刺"><a class="markdownIt-Anchor" href="#11-cmake-版本的背刺"></a> 1.1 CMake 版本的“背刺”</h3>
<p>起初，为了追求最新特性，我运行了 <code>pip install cmake --upgrade</code>，安装了 <strong>CMake 4.2.0</strong>（预览版）。</p>
<p><strong>报错现象</strong>：</p>
<p>CMake</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CMake Error at build/_deps/colmap-src/cmake/FindDependencies.cmake:22 (find_package):</span><br><span class="line">  By not providing &quot;FindBoost.cmake&quot; ...</span><br><span class="line">  Could not find a package configuration file provided by &quot;Boost&quot; ...</span><br></pre></td></tr></table></figure>
<p><strong>深度分析</strong>： GLOMAP 在编译时会自动下载 COLMAP 源码作为依赖。COLMAP 的 CMake 脚本还在使用旧版的 <code>FindBoost</code> 模块查找 Boost 库。然而，CMake 4.x 版本激进地移除了这些废弃模块，导致向后兼容性断裂。</p>
<p><strong>🔧 修正</strong>： 降级回稳健的 3.x 版本系列。</p>
<p>Bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install &quot;cmake==3.28.3&quot;</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="第二关依赖库的隐身与冲突-opengl-cgal"><a class="markdownIt-Anchor" href="#第二关依赖库的隐身与冲突-opengl-cgal"></a> 🛑 第二关：依赖库的“隐身”与冲突 (OpenGL &amp; CGAL)</h2>
<h3 id="21-conda-编译器的傲慢-opengl-缺失"><a class="markdownIt-Anchor" href="#21-conda-编译器的傲慢-opengl-缺失"></a> 2.1 Conda 编译器的“傲慢” (OpenGL 缺失)</h3>
<p>虽然系统通过 <code>apt install libgl1-mesa-dev</code> 安装了 OpenGL，但 CMake 依然报错： <code>Could NOT find OpenGL (missing: OPENGL_opengl_LIBRARY OPENGL_glx_LIBRARY)</code></p>
<p><strong>深度分析</strong>： Conda 环境内的 CMake 默认搜索路径被隔离在 Conda 环境内（<code>$CONDA_PREFIX</code>）。它“看不见”宿主机 <code>/usr/lib</code> 下的系统库。</p>
<p><strong>❌ 错误尝试</strong>： 试图添加 <code>-DCMAKE_PREFIX_PATH=&quot;/usr&quot;</code>。 <strong>后果</strong>：CMake 确实找到了 OpenGL，但它同时也顺着 <code>/usr</code> 找到了系统自带的旧版 CUDA (12.0)，导致与 Conda 内的新版 CUDA (12.8) 冲突，报错 <code>Found unsuitable version &quot;12.0.140&quot;, but required is at least &quot;12.6.85&quot;</code>。</p>
<p><strong>🔧 修正</strong>： <strong>精准投喂</strong>。不开放整个 <code>/usr</code>，而是显式指定库文件路径：</p>
<p>Bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-DOPENGL_gl_LIBRARY=/usr/lib/x86_64-linux-gnu/libGL.so \</span><br><span class="line">-DOPENGL_glu_LIBRARY=/usr/lib/x86_64-linux-gnu/libGLU.so</span><br></pre></td></tr></table></figure>
<h3 id="22-cgal-的死循环"><a class="markdownIt-Anchor" href="#22-cgal-的死循环"></a> 2.2 CGAL 的死循环</h3>
<p>COLMAP 强依赖 CGAL。尝试在 Conda 内安装 <code>conda install cgal</code>，却因 Python 版本和依赖锁死导致 <code>LibMambaUnsatisfiableError</code>。于是转而使用系统级 CGAL (<code>apt install libcgal-dev</code>)。</p>
<p><strong>报错现象</strong>： 编译时报错 <code>fatal error: CGAL/Delaunay_triangulation_3.h: No such file or directory</code>。</p>
<p><strong>深度分析</strong>： CMake 虽然在配置阶段找到了库（Linker 层面），但 Conda 自带的编译器（Compiler 层面）为了防止环境污染，屏蔽了 <code>/usr/include</code> 标准头文件路径。</p>
<p><strong>🔧 修正 (软链接大法)</strong>： 欺骗编译器，将系统头文件映射到 Conda 环境中：</p>
<p>Bash</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/include/CGAL $CONDA_PREFIX/include/CGAL</span><br><span class="line">ln -sf /usr/include/GL/gl.h $CONDA_PREFIX/include/GL/gl.h</span><br></pre></td></tr></table></figure>
<hr />
<h2 id="第三关编译器的超前-gcc-14-vs-boost"><a class="markdownIt-Anchor" href="#第三关编译器的超前-gcc-14-vs-boost"></a> 🛑 第三关：编译器的“超前” (GCC 14 vs Boost)</h2>
<p>这是最隐蔽的一个坑。</p>
<p><strong>报错现象</strong>：</p>
<p>C++</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/home/ltx/.../boost/math/cstdfloat/cstdfloat_limits.hpp:46:13: error: redefinition of &#x27;class std::numeric_limits&lt;__float128&gt;&#x27;</span><br></pre></td></tr></table></figure>
<p><strong>深度分析</strong>：</p>
<ul>
<li><strong>GCC 14</strong>：原生支持并定义了 128 位浮点数 (<code>__float128</code>) 的 <code>numeric_limits</code> 特化。</li>
<li><strong>Boost 1.82</strong>：不知道 GCC 14 已经干了这事，于是它自己又定义了一遍。</li>
<li><strong>结果</strong>：C++ 也就是所谓的 One Definition Rule (ODR) 违规，编译直接炸裂。</li>
</ul>
<p><strong>❌ 错误尝试</strong>： 使用编译参数 <code>-DBOOST_MATH_DISABLE_FLOAT128</code>。无效，因为某些 Boost 头文件的内部包含逻辑可能绕过了这个宏检查。</p>
<p><strong>🔧 修正 (源码 Patch)</strong>： 编写 Python 脚本，直接修改 Conda 环境里的 Boost 头文件。</p>
<ul>
<li>
<p><strong>坑中坑</strong>：最初的脚本使用简单的字符串匹配插入 <code>#if</code> 和 <code>#endif</code>，结果因为未能正确处理嵌套的大括号或 <code>template&lt;&gt;</code> 前缀，导致 <code>#endif</code> 插入位置错误，截断了类定义，引发 <code>expected unqualified-id before '}'</code> 语法错误。</p>
</li>
<li>
<p><strong>最终解</strong>：利用文件末尾的锚点 (<code>namespace std</code>) 倒序定位，精准包裹冲突代码块：</p>
<p>C++</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#if !defined(__GNUC__) || __GNUC__ &lt; 14 </span><br><span class="line">// ... 冲突的类定义 ...</span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>
</li>
</ul>
<hr />
<h2 id="第四关链接器的精神分裂-abi-conflict"><a class="markdownIt-Anchor" href="#第四关链接器的精神分裂-abi-conflict"></a> 🛑 第四关：链接器的“精神分裂” (ABI Conflict)</h2>
<p>这是编译通过后，在 Link 阶段的大 Boss。</p>
<p><strong>报错现象</strong>：</p>
<p>Plaintext</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">undefined reference to `boost::program_options::...::set_additional_parser(... std::__cxx11::basic_string ...)`</span><br></pre></td></tr></table></figure>
<p><strong>深度分析</strong>：</p>
<ol>
<li><strong>GLOMAP (你的代码)</strong>：使用 GCC 14 编译，默认开启 <strong>C++11 ABI</strong> (新版字符串内存布局)。符号中带有 <code>cxx11</code> 标签。</li>
<li><strong>Boost (Conda 里的库)</strong>：为了兼容性，Conda-forge 里的 Boost 很多时候还在使用 <strong>旧版 ABI</strong>。</li>
<li><strong>结果</strong>：链接器拿着“新版钥匙”去开“旧版锁”，找不到对应的符号。</li>
</ol>
<p><strong>❌ 错误尝试</strong>： 强制 GLOMAP 使用旧版 ABI：<code>-D_GLIBCXX_USE_CXX11_ABI=0</code>。 <strong>后果</strong>：Boost 的报错解决了，但 <strong>Glog 和 Ceres</strong>（也在 Conda 里）却报出了几百个 <code>undefined reference</code>。原来 Conda 环境是分裂的：Boost 是旧 ABI，而 Glog/Ceres 是新 ABI。<strong>这被称为 “ABI Split”</strong>。</p>
<p><strong>🔧 修正 (心脏移植)</strong>： 既然 Conda 的 Boost 是旧 ABI，不可用，我们决定<strong>弃用 Conda 的 Boost，强行链接 Ubuntu 系统的 Boost</strong>（系统库通常是新 ABI，与 GCC 14 兼容）。</p>
<ol>
<li>
<p>安装系统 Boost: <code>apt install libboost-all-dev</code></p>
</li>
<li>
<p><strong>偷梁换柱</strong>：将 Conda 的 Boost 头文件目录重命名隐藏，建立软链接指向 <code>/usr/include/boost</code>。</p>
</li>
<li>
<p>CMake 强制指定：</p>
<p>CMake</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-DBOOST_ROOT=/usr \</span><br><span class="line">-DBoost_LIBRARY_DIR=/usr/lib/x86_64-linux-gnu \</span><br><span class="line">-DBoost_NO_SYSTEM_PATHS=OFF</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这样，GLOMAP 编译时用的是系统的 Boost（新 ABI），链接时也用的系统的 Boost，完美解决了 ABI 冲突。</p>
<hr />
<h2 id="第五关运行时的dll-hell-sqlite-python"><a class="markdownIt-Anchor" href="#第五关运行时的dll-hell-sqlite-python"></a> 🛑 第五关：运行时的“DLL Hell” (SQLite &amp; Python)</h2>
<p>编译终于成功了，但运行 <code>run_glomap.py</code> 时直接崩溃。</p>
<h3 id="51-sqlite-版本冲突"><a class="markdownIt-Anchor" href="#51-sqlite-版本冲突"></a> 5.1 SQLite 版本冲突</h3>
<p><strong>报错现象</strong>：</p>
<p>Plaintext</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[database_sqlite.cc:1631] SQLite error: SQL logic error</span><br><span class="line">terminate called after throwing ... No registered database factory succeeded.</span><br></pre></td></tr></table></figure>
<p><strong>深度分析</strong>：</p>
<ul>
<li><strong>Database 来源</strong>：由 <code>colmap feature_extractor</code> 生成。如果是调用系统旧版 COLMAP，生成的 DB 可能版本较老。</li>
<li><strong>GLOMAP 读取</strong>：GLOMAP 链接了 Conda 的新版 SQLite 库。</li>
<li><strong>关键点</strong>：由于我们在编译时为了解决 OpenGL 问题，在 RPATH 中引入了 <code>/usr/lib</code>，导致 GLOMAP 运行时<strong>优先加载了系统的旧版 <code>libsqlite3.so</code></strong>，而不是 Conda 的新版。新代码 + 旧库 = 崩溃。</li>
</ul>
<p><strong>🔧 修正</strong>： 在 Python 脚本中注入环境变量，强制将 Conda 的 lib 目录优先级提至最高：</p>
<p>Python</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">env[&quot;LD_LIBRARY_PATH&quot;] = f&quot;&#123;conda_lib&#125;:&#123;env.get(&#x27;LD_LIBRARY_PATH&#x27;, &#x27;&#x27;)&#125;&quot;</span><br></pre></td></tr></table></figure>
<h3 id="52-python-库的自相残杀"><a class="markdownIt-Anchor" href="#52-python-库的自相残杀"></a> 5.2 Python 库的自相残杀</h3>
<p><strong>报错现象</strong>： <code>ImportError: cannot import name 'dispatch_model' ... circular import</code> <code>AssertionError: .../distutils/core.py</code></p>
<p><strong>深度分析</strong>：</p>
<ol>
<li><strong>Setuptools vs Distutils</strong>：PyTorch 在即时编译 CUDA 算子（gsplat）时，触发了 Setuptools 对 Distutils 的劫持检查。环境中的 Setuptools 版本过高，导致断言失败。</li>
<li><strong>Accelerate 循环引用</strong>：Nerfstudio 依赖的 <code>accelerate</code> 库与 <code>transformers</code> 库版本不匹配，导致模块导入死循环。</li>
</ol>
<p><strong>🔧 修正</strong>：</p>
<ol>
<li>注入环境变量：<code>env[&quot;SETUPTOOLS_USE_DISTUTILS&quot;] = &quot;stdlib&quot;</code></li>
<li>升级库：<code>pip install --upgrade accelerate transformers</code></li>
</ol>
<hr />
<h2 id="总结"><a class="markdownIt-Anchor" href="#总结"></a> 🏁 总结</h2>
<p>要让 GLOMAP 在一个“由于使用了 Conda 而变得复杂”的现代 Linux 环境中跑起来，我们实际上完成了一次<strong>外科手术级别的环境改造</strong>：</p>
<ol>
<li><strong>Patch 源码</strong>：修改 Boost 头文件以适配 GCC 14。</li>
<li><strong>Patch 文件系统</strong>：通过软链接让 Conda 编译器看到系统图形库。</li>
<li><strong>Patch 依赖树</strong>：混合使用系统级 Boost 和 Conda 级 Ceres/Glog 以对齐 ABI。</li>
<li><strong>Patch 运行时</strong>：劫持 <code>LD_LIBRARY_PATH</code> 解决动态库加载顺序。</li>
</ol>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/tianxingleo.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/tianxingleo.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">Tianxingleo</div><div class="post-copyright__author_desc"></div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/')">用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线&amp;url=http://tianxingleo.top/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/&amp;pic=https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=24836490-acf9-b03d-252d-8563dfdaf8f0" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://tianxingleo.top" target="_blank">Tianxingleo的Blog</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/3dgs/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>3dgs<span class="tagsPageCount">7</span></a><a class="post-meta__box__tags" href="/tags/wsl/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>wsl<span class="tagsPageCount">5</span></a><a class="post-meta__box__tags" href="/tags/linux/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>linux<span class="tagsPageCount">5</span></a><a class="post-meta__box__tags" href="/tags/colmap/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>colmap<span class="tagsPageCount">4</span></a><a class="post-meta__box__tags" href="/tags/glomap/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>glomap<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=e96519e2-f6f8-2d98-c7c3-1b5cf7f83d84" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2025/12/10/%E5%9C%A8%E6%9C%80%E6%96%B0Blackwell%E6%9E%B6%E6%9E%84%E4%BD%8E%E6%98%BE%E5%AD%98%E6%B6%88%E8%B4%B9%E7%BA%A7%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%80%9A%E8%BF%87%E5%A4%8D%E7%8E%B0%E6%9C%80%E6%96%B0%E8%AE%BA%E6%96%87%E4%BD%BF%E7%94%A8VGGT%E6%9B%BF%E4%BB%A3COLMAP%E5%8A%A0%E9%80%9F3DGS%E8%AE%AD%E7%BB%83/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/9c7026124dcb360f454545904aac9838cb95adb8.webp?_r_=43b6add5-7d3b-3db7-7f6b-e52d440a2ae2" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练</div></div></a></div><div class="next-post pull-right"><a href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=14abc492-189f-1988-fe88-23823f84ae6a" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2025/12/07/%E5%9C%A8-Linux-WSL-RTX-50-%E7%B3%BB%E5%88%97%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%83%A8%E7%BD%B2%E5%8E%9F%E7%94%9F-GPU-%E5%8A%A0%E9%80%9F-COLMAP-%E7%9A%84%E6%8C%87%E5%8D%97/" title="在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=021cc5bf-9432-d528-85c9-abae5231347d" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-07</div><div class="title">在 Linux (WSL) + RTX 50 系列显卡上部署原生 GPU 加速 COLMAP 的指南</div></div></a></div><div><a href="/2025/12/10/%E5%9C%A8%E6%9C%80%E6%96%B0Blackwell%E6%9E%B6%E6%9E%84%E4%BD%8E%E6%98%BE%E5%AD%98%E6%B6%88%E8%B4%B9%E7%BA%A7%E6%98%BE%E5%8D%A1%E4%B8%8A%E9%80%9A%E8%BF%87%E5%A4%8D%E7%8E%B0%E6%9C%80%E6%96%B0%E8%AE%BA%E6%96%87%E4%BD%BF%E7%94%A8VGGT%E6%9B%BF%E4%BB%A3COLMAP%E5%8A%A0%E9%80%9F3DGS%E8%AE%AD%E7%BB%83/" title="在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/9c7026124dcb360f454545904aac9838cb95adb8.webp?_r_=43b6add5-7d3b-3db7-7f6b-e52d440a2ae2" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-10</div><div class="title">在最新Blackwell架构低显存消费级显卡上通过复现最新论文使用VGGT替代COLMAP加速3DGS训练</div></div></a></div><div><a href="/2025/12/05/%E3%80%90%E9%A6%96%E5%8F%91%E3%80%91%E9%92%88%E5%AF%B9-Windows-%E7%8E%AF%E5%A2%83%E4%B8%8B-NVIDIA-RTX-50-%E7%B3%BB%E5%88%97%E5%9B%BE%E5%BD%A2%E5%A4%84%E7%90%86%E5%8D%95%E5%85%83%E7%9A%84-Nerfstudio-3DGS-%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B/" title="【首发】针对 Windows 环境下 NVIDIA RTX 50 系列图形处理单元的 Nerfstudio (3DGS) 部署流程"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/7ae2047cde0451cf21fa7a8842565b58f0e9d1e1.webp?_r_=4e70e117-ddde-43d8-6ede-38c143437ac6" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-05</div><div class="title">【首发】针对 Windows 环境下 NVIDIA RTX 50 系列图形处理单元的 Nerfstudio (3DGS) 部署流程</div></div></a></div><div><a href="/2025/12/08/%E3%80%90%E9%A6%96%E5%8F%91%E3%80%91%E5%9C%A8-RTX-5070-Blackwell-WSL2-%E4%B8%8A%E8%B7%91%E9%80%9A%E6%9C%80%E6%96%B0%E6%A8%A1%E5%9E%8B-Meta-SAM-3D-%E7%9A%84%E7%BB%88%E6%9E%81%E6%96%B9%E6%A1%88/" title="【首发】在 RTX 5070 (Blackwell) + WSL2 上跑通最新模型 Meta SAM 3D 的终极方案"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=30d8ca3d-578d-c0d3-a638-748cf0ef58f9" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-08</div><div class="title">【首发】在 RTX 5070 (Blackwell) + WSL2 上跑通最新模型 Meta SAM 3D 的终极方案</div></div></a></div><div><a href="/2025/12/05/%E5%85%B3%E4%BA%8E%E5%9C%A8-Google-Colab-%E5%B9%B3%E5%8F%B0%E5%9F%BA%E4%BA%8E-Tesla-T4-%E5%8A%A0%E9%80%9F%E5%99%A8%E5%85%A8%E6%B5%81%E7%A8%8B%E9%83%A8%E7%BD%B2%E4%B8%89%E7%BB%B4%E9%AB%98%E6%96%AF%E6%B3%BC%E6%BA%85%EF%BC%883DGS%EF%BC%89%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AE%9E%E6%96%BD%E5%8D%8F%E8%AE%AE%EF%BC%882025-12%EF%BC%89/" title="关于在 Google Colab 平台基于 Tesla T4 加速器全流程部署三维高斯泼溅（3DGS）技术的实施协议（2025.12）"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/7ae2047cde0451cf21fa7a8842565b58f0e9d1e1.webp?_r_=42a63e72-4b64-a6e1-b28c-06e9712bcef9" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-05</div><div class="title">关于在 Google Colab 平台基于 Tesla T4 加速器全流程部署三维高斯泼溅（3DGS）技术的实施协议（2025.12）</div></div></a></div><div><a href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=14abc492-189f-1988-fe88-23823f84ae6a" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-12-10</div><div class="title">3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="anzhiyufont anzhiyu-icon-comments"></i><span> 评论</span></div><div class="comment-randomInfo"><a onclick="anzhiyu.addRandomCommentInfo()" href="javascript:void(0)">匿名评论</a><a href="/privacy" style="margin-left: 4px">隐私政策</a></div><div class="comment-tips" id="comment-tips"><span>✅ 你无需删除空行，直接评论以获取最佳展示效果</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div><div class="comment-barrage"></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.com/tianxingleo.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);"><b style="color:#fff">这是天马行空（tianxingleo）</b>的blog，用于<b style="color:#fff">记录、分享、学习、交流</b></div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">Tianxingleo</h1><div class="author-info__desc"></div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="/atom.xml" target="_blank" title="RSS"><i class="anzhiyufont anzhiyu-icon-rss"></i></a></div></div></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bullhorn anzhiyu-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来看我的博客鸭~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%94%A8-glomap-%E6%9B%BF%E6%8D%A2-colmap-%E5%8A%A0%E9%80%9F-3dgs-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF"><span class="toc-number">1.</span> <span class="toc-text"> 用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E6%A0%B8%E5%BF%83%E6%80%9D%E8%B7%AF"><span class="toc-number">1.1.</span> <span class="toc-text"> 1. 核心思路</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E7%8E%AF%E5%A2%83%E4%BE%9D%E8%B5%96%E4%B8%8E%E7%BC%96%E8%AF%91-the-golden-configuration"><span class="toc-number">1.2.</span> <span class="toc-text"> 2. 环境依赖与编译 (The “Golden” Configuration)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E7%BA%A7%E4%BE%9D%E8%B5%96"><span class="toc-number">1.2.1.</span> <span class="toc-text"> 2.1 安装系统级依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-%E7%BC%96%E8%AF%91-glomap"><span class="toc-number">1.2.2.</span> <span class="toc-text"> 2.2 编译 GLOMAP</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-python-%E7%AE%A1%E7%BA%BF%E9%9B%86%E6%88%90"><span class="toc-number">1.3.</span> <span class="toc-text"> 3. Python 管线集成</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#31-%E8%BF%90%E8%A1%8C%E6%97%B6%E7%8E%AF%E5%A2%83%E6%B3%A8%E5%85%A5-%E8%A7%A3%E5%86%B3-dll-hell"><span class="toc-number">1.3.1.</span> <span class="toc-text"> 3.1 运行时环境注入 (解决 DLL Hell)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#32-%E6%9B%BF%E6%8D%A2-mapper-%E8%B0%83%E7%94%A8%E9%80%BB%E8%BE%91"><span class="toc-number">1.3.2.</span> <span class="toc-text"> 3.2 替换 Mapper 调用逻辑</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E6%80%BB%E7%BB%93"><span class="toc-number">1.4.</span> <span class="toc-text"> 4. 总结</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B8%A9%E5%9D%91%E5%AE%9E%E5%BD%95%E5%9C%A8-gcc-14-%E4%B8%8E-conda-%E6%B7%B7%E5%90%88%E7%8E%AF%E5%A2%83%E4%B8%AD%E7%BC%96%E8%AF%91-glomap-%E7%9A%84%E8%87%B3%E6%9A%97%E6%97%B6%E5%88%BB"><span class="toc-number">2.</span> <span class="toc-text"> 踩坑实录：在 GCC 14 与 Conda 混合环境中编译 GLOMAP 的至暗时刻</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E5%85%B3%E6%9E%84%E5%BB%BA%E7%B3%BB%E7%BB%9F%E7%9A%84%E7%89%88%E6%9C%AC%E4%BB%A3%E6%B2%9F"><span class="toc-number">2.1.</span> <span class="toc-text"> 🛑 第一关：构建系统的版本代沟</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#11-cmake-%E7%89%88%E6%9C%AC%E7%9A%84%E8%83%8C%E5%88%BA"><span class="toc-number">2.1.1.</span> <span class="toc-text"> 1.1 CMake 版本的“背刺”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E5%85%B3%E4%BE%9D%E8%B5%96%E5%BA%93%E7%9A%84%E9%9A%90%E8%BA%AB%E4%B8%8E%E5%86%B2%E7%AA%81-opengl-cgal"><span class="toc-number">2.2.</span> <span class="toc-text"> 🛑 第二关：依赖库的“隐身”与冲突 (OpenGL &amp; CGAL)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#21-conda-%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E5%82%B2%E6%85%A2-opengl-%E7%BC%BA%E5%A4%B1"><span class="toc-number">2.2.1.</span> <span class="toc-text"> 2.1 Conda 编译器的“傲慢” (OpenGL 缺失)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22-cgal-%E7%9A%84%E6%AD%BB%E5%BE%AA%E7%8E%AF"><span class="toc-number">2.2.2.</span> <span class="toc-text"> 2.2 CGAL 的死循环</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E5%85%B3%E7%BC%96%E8%AF%91%E5%99%A8%E7%9A%84%E8%B6%85%E5%89%8D-gcc-14-vs-boost"><span class="toc-number">2.3.</span> <span class="toc-text"> 🛑 第三关：编译器的“超前” (GCC 14 vs Boost)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E5%85%B3%E9%93%BE%E6%8E%A5%E5%99%A8%E7%9A%84%E7%B2%BE%E7%A5%9E%E5%88%86%E8%A3%82-abi-conflict"><span class="toc-number">2.4.</span> <span class="toc-text"> 🛑 第四关：链接器的“精神分裂” (ABI Conflict)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E5%85%B3%E8%BF%90%E8%A1%8C%E6%97%B6%E7%9A%84dll-hell-sqlite-python"><span class="toc-number">2.5.</span> <span class="toc-text"> 🛑 第五关：运行时的“DLL Hell” (SQLite &amp; Python)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#51-sqlite-%E7%89%88%E6%9C%AC%E5%86%B2%E7%AA%81"><span class="toc-number">2.5.1.</span> <span class="toc-text"> 5.1 SQLite 版本冲突</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#52-python-%E5%BA%93%E7%9A%84%E8%87%AA%E7%9B%B8%E6%AE%8B%E6%9D%80"><span class="toc-number">2.5.2.</span> <span class="toc-text"> 5.2 Python 库的自相残杀</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">2.6.</span> <span class="toc-text"> 🏁 总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/12/17/%E9%AB%98%E6%95%B0%E4%B8%8A%E6%9E%81%E9%99%90%E7%AB%A0%E8%8A%82%E9%94%99%E9%A2%98%E9%9B%86/" title="高数上极限章节错题集"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/7ae2047cde0451cf21fa7a8842565b58f0e9d1e1.webp?_r_=c945c4f4-c3ca-bed5-9e5b-d981f714282f" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="高数上极限章节错题集"/></a><div class="content"><a class="title" href="/2025/12/17/%E9%AB%98%E6%95%B0%E4%B8%8A%E6%9E%81%E9%99%90%E7%AB%A0%E8%8A%82%E9%94%99%E9%A2%98%E9%9B%86/" title="高数上极限章节错题集">高数上极限章节错题集</a><time datetime="2025-12-17T15:11:25.000Z" title="发表于 2025-12-17 23:11:25">2025-12-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/15/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/" title="微分方程笔记整理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/ae2d1eca082f876be72a1278e9e959e9.webp?_r_=e96519e2-f6f8-2d98-c7c3-1b5cf7f83d84" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="微分方程笔记整理"/></a><div class="content"><a class="title" href="/2025/12/15/%E5%BE%AE%E5%88%86%E6%96%B9%E7%A8%8B%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/" title="微分方程笔记整理">微分方程笔记整理</a><time datetime="2025-12-15T11:44:08.000Z" title="发表于 2025-12-15 19:44:08">2025-12-15</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/14/%E7%BA%BF%E4%BB%A3%E4%B8%8E%E5%87%A0%E4%BD%955-6-7-%E7%AB%A0%E7%AC%94%E8%AE%B0/" title="线代与几何5 6 7 章笔记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/7ae2047cde0451cf21fa7a8842565b58f0e9d1e1.webp?_r_=443d69be-68fc-b8c1-48a2-2c39a6fef9b2" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="线代与几何5 6 7 章笔记"/></a><div class="content"><a class="title" href="/2025/12/14/%E7%BA%BF%E4%BB%A3%E4%B8%8E%E5%87%A0%E4%BD%955-6-7-%E7%AB%A0%E7%AC%94%E8%AE%B0/" title="线代与几何5 6 7 章笔记">线代与几何5 6 7 章笔记</a><time datetime="2025-12-14T11:31:54.000Z" title="发表于 2025-12-14 19:31:54">2025-12-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=14abc492-189f-1988-fe88-23823f84ae6a" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践"/></a><div class="content"><a class="title" href="/2025/12/10/3DGS-%E8%BF%9B%E9%98%B6%EF%BC%9A%E5%A6%82%E4%BD%95%E5%BD%BB%E5%BA%95%E6%B6%88%E9%99%A4%E4%BC%AA%E5%BD%B1%E4%B8%8E%E8%83%8C%E6%99%AF%E6%BC%82%E6%B5%AE%E7%89%A9%E2%80%94%E2%80%94%E5%9F%BA%E4%BA%8E-Nerfstudio-%E7%9A%84%E5%AF%B9%E8%B1%A1%E7%BA%A7%E9%87%8D%E5%BB%BA%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/" title="3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践">3DGS：利用YOLO+SAM+Mask彻底消除伪影与背景漂浮物——基于 Nerfstudio 的对象级重建最佳实践</a><time datetime="2025-12-10T15:04:59.000Z" title="发表于 2025-12-10 23:04:59">2025-12-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/" title="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pub-f8d3afa0c3274f1e943ee2f8c45dff96.r2.dev/91953835_p0.webp?_r_=24836490-acf9-b03d-252d-8563dfdaf8f0" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线"/></a><div class="content"><a class="title" href="/2025/12/10/%E7%94%A8-GLOMAP-%E6%9B%BF%E6%8D%A2-COLMAP-%E5%8A%A0%E9%80%9F-3DGS-%E9%87%8D%E5%BB%BA%E7%AE%A1%E7%BA%BF/" title="用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线">用 GLOMAP 替换 COLMAP 加速 3DGS 重建管线</a><time datetime="2025-12-10T15:02:02.000Z" title="发表于 2025-12-10 23:02:02">2025-12-10</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="Tianxingleo" target="_blank">Tianxingleo</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">39</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">54</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://tianxingleo.github.io" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://avatars.githubusercontent.com/u/237200863?v=4" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/tianxingleo" title="Github"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://github.githubassets.com/assets/GitHub-Mark-ea2971cee799.png" alt="Github"/><span class="back-menu-item-text">Github</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/bangumis/"><i class="anzhiyufont anzhiyu-icon-bilibili faa-tada" style="font-size: 0.9em;"></i><span> 追番页</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/album/"><i class="anzhiyufont anzhiyu-icon-images faa-tada" style="font-size: 0.9em;"></i><span> 相册集</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/air-conditioner/"><i class="anzhiyufont anzhiyu-icon-fan faa-tada" style="font-size: 0.9em;"></i><span> 小空调</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/3dgs/" style="font-size: 0.88rem;">3dgs<sup>7</sup></a><a href="/tags/5070/" style="font-size: 0.88rem;">5070<sup>1</sup></a><a href="/tags/Nerfstudio/" style="font-size: 0.88rem;">Nerfstudio<sup>1</sup></a><a href="/tags/SAM3D/" style="font-size: 0.88rem;">SAM3D<sup>1</sup></a><a href="/tags/blackwell/" style="font-size: 0.88rem;">blackwell<sup>2</sup></a><a href="/tags/c/" style="font-size: 0.88rem;">c<sup>4</sup></a><a href="/tags/colmap/" style="font-size: 0.88rem;">colmap<sup>4</sup></a><a href="/tags/cpc/" style="font-size: 0.88rem;">cpc<sup>4</sup></a><a href="/tags/cpp/" style="font-size: 0.88rem;">cpp<sup>14</sup></a><a href="/tags/css/" style="font-size: 0.88rem;">css<sup>1</sup></a><a href="/tags/cuda/" style="font-size: 0.88rem;">cuda<sup>1</sup></a><a href="/tags/dp/" style="font-size: 0.88rem;">dp<sup>1</sup></a><a href="/tags/google-colab/" style="font-size: 0.88rem;">google colab<sup>1</sup></a><a href="/tags/html/" style="font-size: 0.88rem;">html<sup>1</sup></a><a href="/tags/key%E7%A4%BE/" style="font-size: 0.88rem;">key社<sup>1</sup></a><a href="/tags/linux/" style="font-size: 0.88rem;">linux<sup>5</sup></a><a href="/tags/mask/" style="font-size: 0.88rem;">mask<sup>1</sup></a><a href="/tags/nerfstudio/" style="font-size: 0.88rem;">nerfstudio<sup>1</sup></a><a href="/tags/pytorch/" style="font-size: 0.88rem;">pytorch<sup>3</sup></a><a href="/tags/sam/" style="font-size: 0.88rem;">sam<sup>1</sup></a><a href="/tags/sam3/" style="font-size: 0.88rem;">sam3<sup>1</sup></a><a href="/tags/tic/" style="font-size: 0.88rem;">tic<sup>1</sup></a><a href="/tags/wsl/" style="font-size: 0.88rem;">wsl<sup>5</sup></a><a href="/tags/yolo/" style="font-size: 0.88rem;">yolo<sup>1</sup></a><a href="/tags/%E5%87%BD%E6%95%B0/" style="font-size: 0.88rem;">函数<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">前端<sup>1</sup></a><a href="/tags/%E5%8A%A8%E6%BC%AB/" style="font-size: 0.88rem;">动漫<sup>1</sup></a><a href="/tags/%E5%A4%A7%E5%AD%A6/" style="font-size: 0.88rem;">大学<sup>7</sup></a><a href="/tags/%E5%A4%A9%E4%BD%BF%E7%9A%84%E5%BF%83%E8%B7%B3/" style="font-size: 0.88rem;">天使的心跳<sup>1</sup></a><a href="/tags/%E5%AD%97%E7%AC%A6%E4%B8%B2/" style="font-size: 0.88rem;">字符串<sup>1</sup></a><a href="/tags/%E5%AD%A6%E4%B9%A0/" style="font-size: 0.88rem;">学习<sup>6</sup></a><a href="/tags/%E6%8C%87%E9%92%88/" style="font-size: 0.88rem;">指针<sup>2</sup></a><a href="/tags/%E6%90%9C%E7%B4%A2/" style="font-size: 0.88rem;">搜索<sup>1</sup></a><a href="/tags/%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">数学<sup>2</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>6</sup></a><a href="/tags/%E7%BB%93%E6%9E%84%E4%BD%93/" style="font-size: 0.88rem;">结构体<sup>1</sup></a><a href="/tags/%E8%B4%A8%E6%95%B0%E7%AD%9B/" style="font-size: 0.88rem;">质数筛<sup>2</sup></a><a href="/tags/%E9%93%BE%E8%A1%A8/" style="font-size: 0.88rem;">链表<sup>1</sup></a><a href="/tags/%E9%AB%98%E6%95%B0/" style="font-size: 0.88rem;">高数<sup>6</sup></a><a href="/tags/%E9%AB%98%E7%AD%89%E6%95%B0%E5%AD%A6/" style="font-size: 0.88rem;">高等数学<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="anzhiyufont anzhiyu-icon-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="algolia-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><button class="search-close-button"><i class="anzhiyufont anzhiyu-icon-xmark"></i></button></nav><div class="search-wrap"><div id="algolia-search-input"></div><hr/><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-info"><div class="algolia-stats"></div><div class="algolia-poweredBy"></div></div></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("14/10/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 Tianxingleo 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><script src="https://cdn.cbd.int/algoliasearch@4.18.0/dist/algoliasearch-lite.umd.js"></script><script src="https://cdn.cbd.int/instantsearch.js@4.60.0/dist/instantsearch.production.min.js"></script><script src="/js/search/algolia.js"></script><div class="js-pjax"><script>(() => {
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: '',
      region: '',
      onCommentLoaded: () => {
        anzhiyu.loadLightbox(document.querySelectorAll('#twikoo .tk-content img:not(.tk-owo-emotion)'))
      }
    }, null))
  }

  const loadTwikoo = () => {
    if (typeof twikoo === 'object') setTimeout(runFn,0)
    else getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runFn)
  }

  const getCount = () => {
    const countELement = document.getElementById('twikoo-count')
    if(!countELement) return
    twikoo.getCommentsCount({
      envId: '',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(res => {
      countELement.textContent = res[0].count
    }).catch(err => {
      console.error(err)
    })
  }

  const runFn = () => {
    init();
    GLOBAL_CONFIG_SITE.isPost && getCount()
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) anzhiyu.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else {
      loadTwikoo()
    }
  } else {
    window.loadOtherComment = loadTwikoo
  }
})()</script><input type="hidden" name="page-type" id="page-type" value="post"></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const getComment = () => {
    const runTwikoo = () => {
      twikoo.getRecentComments({
        envId: '',
        region: '',
        pageSize: 6,
        includeReply: true
      }).then(function (res) {
        const twikooArray = res.map(e => {
          return {
            'content': changeContent(e.comment),
            'avatar': e.avatar,
            'nick': e.nick,
            'url': e.url + '#' + e.id,
            'date': new Date(e.created).toISOString()
          }
        })

        saveToLocal.set('twikoo-newest-comments', JSON.stringify(twikooArray), 10/(60*24))
        generateHtml(twikooArray)
      }).catch(function (err) {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.textContent= "无法获取评论，请确认相关配置是否正确"
      })
    }

    if (typeof twikoo === 'object') {
      runTwikoo()
    } else {
      getScript('https://cdn.cbd.int/twikoo@1.6.39/dist/twikoo.all.min.js').then(runTwikoo)
    }
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'data-lazy-src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'><div class='name'><span>${array[i].nick} </span></div></a>`
        }
        
        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <time datetime="${array[i].date}">${anzhiyu.diffDate(array[i].date, true)}</time></div>
        </div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom && ($dom.innerHTML= result)
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('twikoo-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["meta[property=\"og:image\"]","meta[property=\"og:title\"]","meta[property=\"og:url\"]","meta[property=\"og:type\"]","meta[property=\"og:site_name\"]","meta[property=\"og:description\"]","head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: true,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', 'G-NVDE0BFR5M', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>